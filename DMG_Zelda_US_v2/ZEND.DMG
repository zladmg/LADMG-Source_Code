;=== Ver. USA =====

	PUBALL
;
BANK17	GROUP	$17
	LIB	ZBN
	LIB	ZRAM
;---sub---------------------------------------
	EXTERN	DATA_MOV,ENEMY,EXSTRA,RAMCLR,RAMCL2,BGDTST	
	EXTERN	ENDTST,COINIT,HARTIT,ITEMDP,RNDSUB,WINDOW,ITEMDP2,MSGCHK
	EXTERN	ENIDSHL,OBJBG,ENCAPS,FDIN,FDOUT,NXGOTO,ENEMYL,SVOPEN,GKCHRV
	EXTERN	COHTITL,ITEMDPL,RAMCL3,BGBKST,SOUNDCLR,DJITRV,ENOMST,EN2CST
	EXTERN	ITMINC,LDTIM0,NXOMSBL,BBSDST,ENPTST,STATINC,SOUNDOUT,BGMON
	EXTERN	PSLCTGO,TSV4000,MSGCH2,SCRRCLR,DATA_MOV2,MVCALC,PLCSET
	EXTERN	PLSDCL,LDTIM1,LDTIM3,CRENPSL,ENPSSV,EN1CST,ENOMST2
;- -lavel -
	EXTERN	VRMCL,VRMBT,BKCH2,BKCH3,WINDBGS,RBGST,BOMBR,BUMER,KTOBJ,GRBGCR
	EXTERN	BGUNCH,ECACH,PYAAA,EMOVE,EFAIL,PSLBGS,GPLAY,GVCHG,GOVBG,PMOVE
	EXTERN	PSLBG2,NSLBGS,NMREG,NMCLR,NCLBGS,PSLCT,GMAPBGS,VRMB2,OPBGS
	EXTERN	PINDR2,DJBST,GRBST,GMBST,BLVRDS,GMAPCL,BNKTR,NMCPY,SPTST
	EXTERN	BKCHG,TLCHG,ODCHG,GPMAIN,NCPBGS,GRCST,TSVBG,PINDR1,GIRL1
	EXTERN	OPBST,OPBG2,OPBG3,OPBS2,EINIT,LOGOS,PECBG,PECCD,LOVBG,LOVCD
	EXTERN	EBGY,ECHA2,HIMITSU2
	EXTERN	ECHA,EBGA,EDAI,ENDG,GAGE,ECHB2,EBGB2,EBGC,ECHC,ECHB,EBGB
	EXTERN	ECHD,EBGD,ECHE,EBGE,ECHF,EBGF		;,TOURCK
	EXTERN	EWAKU,EWAKU2,EBGA1,EBGA2,EBGA3,EBGA4,EBGA5,ECHA1,ECHYM
	EXTERN	WANWAN,OZWAN,OCTA1,UNIUNI,GIRL0,KODOMB,KODOMC,FOXDOG,BTFLY,NIWAT
	EXTERN	PAPA0
;- - - - - - - - - - - - - - - - - - -
	LIST
	ORG	$4000
	KANJI
;==================================================
YMCLPT
	DB	24,05,55,32,54,14,30,43
	DB	37,20,31,18,21,44,49,63
	DB	12,48,01,51,04,39,08,29
	DB	56,23,62,40,17,00,58,61
	DB	42,11,27,10,52,07,34,15
	DB	28,35,47,59,45,22,60,50
	DB	16,41,02,46,13,25,09,38
	DB	36,06,19,33,26,03,57,53
;- - - - - - - - - - - - - - -
YMCLBT
	DB	%01111111
	DB	%10111111
	DB	%11011111
	DB	%11101111
	DB	%11110111
	DB	%11111011
	DB	%11111101
	DB	%11111110
; - - - - - - - - - - - - - - 
YMCLAD
	DW	$9150
	DW	$9060
	DW	$9070
	DW	$9080
	DW	$9090
	DW	$90A0
	DW	$91F0
	DW	$9160
	DW	$9170
	DW	$9180
	DW	$9190
	DW	$91A0
;- - - - - - - - - - - - - - - - - -
YMCLER
	LD	A,(EDCNT1)
	LD	E,A
	LD	D,$00
	LD	HL,YMCLPT	
	ADD	HL,DE
	LD	A,(HL)
	RRA
	RRA
	AND	%00001110
	LD	B,A
;	
	LD	A,(HL)
	AND	$07
	LD	E,A
	LD	HL,YMCLBT
	ADD	HL,DE
	LD	C,(HL)
;
	XOR	A
	LD	D,A
YMCL10
	LD	(WORK2),A
	SLA	A
	LD	E,A
	LD	HL,YMCLAD
	ADD	HL,DE
	LD	A,(HLI)
	LD	H,(HL)
	ADD	A,B
	LD	L,A
;
	LD	A,(HL)
	AND	C
	LD	(HLI),A
;
	LD	A,(HL)
	AND	C
	LD	(HL),A
;
	LD	A,(WORK2)
	INC	A
	CP	$0C
	JR	NZ,YMCL10
;
	XOR	A
	LD	(CHTRF2),A
;
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	開発スタッフ表示		       %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
STAFFDT1
;;;		 0123456789ABCDEF01
	DB	'     DIRECTOR     '	;0
	DB	' DUNGEON DESIGNER '	;1
	DB	'  SCRIPT WRITER   '	;2
	DB	'    PROGRAMMER    '	;3
	DB	'CHARACTER DESIGNER'	;4
	DB	'  SOUND COMPOSER  '	;5
	DB	'   ILLUSTRATOR    '	;6
	DB	' SPECIAL THANKS TO'	;7
	DB	'     PRODUCER     '	;8
	DB	'EXECUTIVE PRODUCER'	;9
	DB	'  ENGLISH SCRIPT  '	;A
	DB	'                  '	;B
STAFFDT2
;;;		 0123456789ABCDEF01
	DB	'  TAKASHI TEZUKA  '	;0
	DB	' YASUHISA YAMAMURA'	;1
	DB	'  KENSUKE TANABE  '	;2
	DB	' YOSHIAKI KOIZUMI '	;3
	DB	'  KAZUAKI MORITA  '	;4
	DB	'TAKAMITSU KUZUHARA'	;5
	DB	'  MASANAO ARIMOTO '	;6
	DB	'  SHIGEFUMI HINO  '	;7
	DB	'   KAZUMI TOTAKA  '	;8
	DB	'   MINAKO HAMANO  '	;9
	DB	'  KOZUE ISHIKAWA  '	;A
	DB	'  YOUICHI KOTABE  '	;B
	DB	' TOSHIHIKO NAKAGO '	;C
	DB	'    KEIZO KATO    '	;D
	DB	'    KOJI KONDO    '	;E
	DB	'  TOMOAKI KUROUME '	;F
	DB	' SHIGERU MIYAMOTO '	;10
	DB	' HIROSHI YAMAUCHI '	;11
	DB	'     DAN OWSEN    '	;12
	DB	' MASAICHI OKUMURA '	;13
	DB	'    KANAE WADA    '	;14
;
	DB	'THE  END          '	;15
;====================================================
STAFFST
	LD	A,(EDTIM3)
;;	LD	A,(EDTIM1)
	AND	A
	RET	NZ
;
	CALL	STDSP1
	CALL	STDSP2
;
	LD	A,(STMODE)
	RST	00
	DW	STF1000
	DW	STF2000
	DW	STF3000
	DW	STF4000
	DW	STF5000
	DW	STF6000
;----------------------------------------
STAFFMD1
 DB $00,$01,$02,$02,$03,$03,$04,$04,$05,$05,$05,$06
 DB $0A
 DB $07,$07,$07,$07,$07
 DB $08
 DB $09
 DB $0B
;
STAFFMD2
 DB $00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0B
 DB $12
 DB $0C,$0E,$0F,$13,$14
 DB $10
 DB $11
 DB $15
;
STF1000
	LD	A,(EDTIM2)
	AND	A
	RET	NZ
;
	LD	C,$00
;
	LD	A,(EDCNT0)
	LD	E,A
	LD	D,$00
	LD	HL,STAFFMD1
	ADD	HL,DE
	LD	A,(STWRK0)
	CP	(HL)
	JR	NZ,STF1010
;
	INC	C
STF1010
	LD	A,C
	LD	(EDWRK5),A	;肩書きもフエード!
;
	LD	A,(HL)
	LD	(STWRK0),A
;
	LD	HL,STAFFMD2
	ADD	HL,DE
	LD	A,(HL)
	LD	(STWRK1),A
;
	XOR	A
	LD	(EDWRK0),A
	JP	STINC
;----------------------------------------
STFCLD1
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
STFCLD12
	DB	%11111111
	DB	%11111111
	DB	%11111111
	DB	%11111111
	DB	%10101111
	DB	%10101111
	DB	%10101111
	DB	%10101111
	DB	%01011010
	DB	%01011010
	DB	%01011010
	DB	%01011010
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
STFCLD2
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
STFCLD2B
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%01101111
	DB	%01101111
	DB	%01101111
	DB	%01101111
	DB	%10111111
	DB	%10111111
	DB	%10111111
	DB	%10111111
	DB	%11111111
	DB	%11111111
	DB	%11111111
	DB	%11111111
;- - - - - - - - - - - - - - - - -
STF2000
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,STF2020
;
	LD	A,(EDWRK0)
	INC	A
	LD	(EDWRK0),A
	CP	$0C
	JR	NZ,STF2020
;
STIM
	LD	A,$7C ;88
;;	LD	A,$A0
	LD	(EDTIM2),A
;
	CALL	STINC
;
	LD	A,(EDCNT0)
	CP	$14
	JR	NZ,STF2020
;
	LD	(HL),$04
STF2020
	LD	A,(EDWRK0)
	LD	E,A
	LD	A,(FRCNT)
	AND	$03
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,STFCLD1
	LD	A,(EDCNT0)
	CP	$14
	JR	NZ,STF2021
	LD	HL,STFCLD12
STF2021
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
;
;	LD	A,(EDWRK5)
;	AND	A
;	JR	NZ,STF2030
;;
;	LD	A,(HL)
;	LD	(OBP0FG),A
STF2030
	RET
;- - - - - - - - - - - - - - - - -
STF3000
;	LD	A,(KEYA2)
;	AND	$30
;	JR	NZ,STF3002
;
	LD	A,(EDTIM2)
	AND	A
	RET	NZ
;
;STF3002
	LD	C,$00
;
	LD	A,(EDCNT0)
	INC	A
	LD	E,A
	LD	D,$00
	LD	HL,STAFFMD1	;先読み！
	ADD	HL,DE
	LD	A,(STWRK0)
	CP	(HL)
	JR	NZ,STF3010
;
	INC	C
STF3010
	LD	A,C
	LD	(EDWRK5),A	;肩書きもフエード!
;
	XOR	A
	LD	(EDWRK0),A
STINC
	LD	HL,STMODE
	INC	(HL)
STF3050
	RET	
;==================================
STF4000
	LD	A,(EDCNT0)
	LD	(WORKD),A
;
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,STF4020
;
	LD	A,(EDWRK0)
	INC	A
	LD	(EDWRK0),A
	CP	$0C
	JR	NZ,STF4020
;
	LD	A,(WORKD)
	CP	$14-1
;
	LD	A,$10
;
	JR	C,STF4002
;
	LD	A,$80
STF4002
	LD	(EDTIM2),A
;
	LD	A,$00
	LD	(STMODE),A
;
	LD	A,(EDCNT0)
	INC	A
;	CP	$13
;	JR	NZ,STF4010
;	XOR	A
;STF4010	
	LD	(EDCNT0),A
;;	CALL	STINC
STF4020
	LD	A,(EDWRK0)
	LD	E,A
	LD	A,(FRCNT)
	AND	$03
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,STFCLD2
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
;
	LD	A,(WORKD) 
	CP	$14-1
	JR	C,STF4030
;
	LD	HL,STFCLD2B
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	(OBP1FG),A
;
;	LD	A,(EDWRK5)
;	AND	A
;	JR	NZ,STF4030
;;
;	LD	A,(HL)
;	LD	(OBP0FG),A
STF4030
	RET
;==================================
STF5000
	LD	A,EDAI
	CALL	ENIDSHL	;かもめマリンセット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$E0
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$10
;
	LD	HL,ENXSPD
	ADD	HL,DE
	LD	(HL),$08
;
	LD	HL,ENYSPD
	ADD	HL,DE
	LD	(HL),$08
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$10
	JP	STINC
;==================================
STF6000
	RET
;------------------------------------------
STD1DT
;;    A   B   C   D   E   F   G   H   I   J   K   L   M   N   O   P
 DB $40,$00,$41,$42,$43,$00,$44,$45,$46,$00,$47,$48,$49,$4A,$4B,$50
;;    Q   R   S   T   U   V   W   X   Y   Z
 DB $00,$51,$52,$53,$54,$55,$2F,$3F,$00,$00
;----------------------------------------
STDSP1
	LD	A,(STWRK0)
	CP	$FF
	RET	Z
;
	RLA
	AND	%11111110
	LD	E,A
	RLA
	RLA
	RLA
	AND	%11110000
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,STAFFDT1
	ADD	HL,DE
;
	LD	DE,OAM+48
;
	LD	A,(FRCNT)
	AND	$01
	LD	A,$10
	JR	Z,STDP108
;
	INC	HL
	LD	A,$18
STDP108
	LD	(WORK0),A
;
	LD	C,09
STDP110
	LD	A,$40
	LD	(DE),A
	INC	DE
	LD	A,(WORK0)
	LD	(DE),A
	INC	DE
	ADD	A,$10
	LD	(WORK0),A
;
	LD	A,(HLI)
	INC	HL
	PUSH	HL
	PUSH	DE
	CP	' '
	JR	NZ,STDP120
;
	LD	A,$0F	;Space
	JR	STDP130
STDP120
	SUB	'A'
	LD	E,A
	LD	D,$00
	LD	HL,STD1DT
	ADD	HL,DE
	LD	A,(HL)
STDP130
	POP	DE
	POP	HL
	LD	(DE),A
	INC	DE
;
	LD	A,$10
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,STDP110
;
	RET
;------------------------------------------
STD2CD
	DB	$20,$30	;A
	DB	$21,$31	;B
	DB	$22,$22	;C
	DB	$23,$33	;D
	DB	$24,$34	;E
	DB	$24,$35	;F
	DB	$22,$32	;G
	DB	$36,$30	;H
	DB	$27,$27	;I
	DB	$28,$38	;J
	DB	$29,$39	;K
	DB	$00,$00	;L
	DB	$2A,$3A	;M
	DB	$2B,$3B	;N
	DB	$20,$20	;O
	DB	$21,$35	;P
	DB	$00,$00	;Q
	DB	$21,$26	;R
	DB	$2C,$3C	;S
	DB	$2D,$3D	;T
	DB	$36,$20	;U
	DB	$00,$00	;V
	DB	$2E,$3E	;W
	DB	$00,$00	;X
	DB	$36,$25	;Y
	DB	$37,$37	;Z
;------------------------------------------
STD2AD
	DB	$10,$10	;A
	DB	$10,$10	;B
	DB	$10,$50	;C
	DB	$10,$10	;D
	DB	$10,$10	;E
	DB	$10,$10	;F
	DB	$10,$10	;G
	DB	$50,$10	;H
	DB	$10,$50	;I
	DB	$10,$10	;J
	DB	$10,$10	;K
	DB	$10,$10	;L
	DB	$10,$10	;M
	DB	$10,$10	;N
	DB	$10,$50	;O
	DB	$10,$10	;P
	DB	$10,$10	;Q
	DB	$10,$10	;R
	DB	$10,$10	;S
	DB	$10,$10	;T
	DB	$50,$50	;U
	DB	$10,$10	;V
	DB	$10,$10	;W
	DB	$10,$10	;X
	DB	$50,$10	;Y
	DB	$10,$70	;Z
;----------------------------------------
STDSP2
	LD	A,(STWRK1)
	RLA
	AND	%11111110
	LD	E,A
	LD	D,$00
	RLA
	RL	D
	RLA
	RL	D
	RLA
	RL	D
	AND	%11110000
	ADD	A,E
	LD	E,A
	LD	A,D
	ADC	A,$00
	LD	D,A
	LD	HL,STAFFDT2
	ADD	HL,DE
;
	PUSH	HL
;
	XOR	A
	LD	(WORK1),A
	LD	DE,OAM+48+36
;
	LD	A,$55
	CALL	STD2SB
;
	LD	HL,WORK1
	INC	(HL)
;
	POP	HL
	LD	DE,OAM+48+72
;
	LD	A,$5D
STD2SB
	LD	(ENHELP2),A
;
	LD	C,18
	LD	B,$08
;
	LD	A,(STWRK1)
	CP	$15
	LD	A,$10+$28
	JR	Z,STDP208	;THE ENDはフラッシング無し！
;
	LD	C,09
	LD	B,$10
;
	LD	A,(FRCNT)
	AND	$01
	LD	A,$10
	JR	Z,STDP208
;
	INC	HL
	LD	A,$18
STDP208
	LD	(WORK0),A
STDP210
	LD	A,(ENHELP2)
	LD	(DE),A
	INC	DE
	LD	A,(WORK0)
	LD	(DE),A
	INC	DE
	ADD	A,B ;$10
	LD	(WORK0),A
;
	LD	A,(STWRK1)
	CP	$15
	LD	A,(HLI)
	JR	Z,STDP21E	;THE END?
	INC	HL
STDP21E
	PUSH	HL
	PUSH	DE
	CP	' '
	JR	NZ,STDP220
;
	LD	A,$0F	;Space
	JR	STDP230
STDP220
	SUB	'A'
	SLA	A
	LD	HL,WORK1
	ADD	A,(HL)
	LD	E,A
	LD	D,$00
	LD	HL,STD2AD
	ADD	HL,DE
	LD	A,(HL)
	LD	(ENHELP),A
;
	LD	HL,STD2CD
	ADD	HL,DE
	LD	A,(HL)
STDP230
	POP	DE
	POP	HL
	LD	(DE),A
	INC	DE
;
	LD	A,(ENHELP)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,STDP210
;
	RET
;				; YES !
;;================================================
NAMISE
	LD	A,(NAMIOTO)
	INC	A
	CP	$C0
	JR	C,NMSE10	; sound set !
;
	LD	A,$0F
	LD	(SOUND3),A	;(S)
;
	XOR	A
NMSE10
	LD	(NAMIOTO),A
;
	LD	A,(KAMOSE)
	AND	A
	JR	NZ,KMSE10
;
	LD	A,$21
	LD	(SOUND1),A	;(S)
;
	CALL	RNDSUB
	AND	$7F
	ADD	A,$50
	LD	(KAMOSE),A
KMSE10
	DEC	A
	LD	(KAMOSE),A
	RET
;=====================================================
NMVSDT
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13  ....
 DB $92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92,$93,$92
NMVSDT2
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13  ....
 DB $82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82,$83,$82
;- -遠景波書き換え- -
NAMIVS
	LD	A,(FRCNT)
	AND	$0F
	CP	$02
	JR	NZ,NMVS90
;
	PUSH	DE
;
	LD	HL,VRAMD+1
	LD	A,D
	LD	(HLI),A
	LD	A,E
	LD	(HLI),A
	LD	A,$13
	LD	(HLI),A
;
	LD	DE,NMVSDT
	LD	A,(FRCNT)
	AND	$10
	JR	Z,NMVS20
	INC	DE
NMVS20
	LD	C,$14
NMVS30
	LD	A,(DE)
	LD	(HLI),A
	DEC	C
	JR	NZ,NMVS30
;
	POP	DE
;
	LD	A,D
	LD	(HLI),A
	LD	A,E
	SUB	$20
	LD	(HLI),A
	LD	A,$13
	LD	(HLI),A
;
	LD	DE,NMVSDT2
	LD	A,(FRCNT)
	AND	$10
	JR	Z,NMVS202
	INC	DE
NMVS202
	LD	C,$14
NMVS302
	LD	A,(DE)
	LD	(HLI),A
	DEC	C
	JR	NZ,NMVS302
;
;
;
;
;
	LD	(HL),C
;
NMVS90
	RET
;======================================================
KUJSWD
	DB	$F4,$F4,$F5,$F6,$F7,$F7,$F8,$F8
	DB	$F8,$F8,$F7,$F7,$F6,$F5,$F4,$F4
;	
ENDWAVE
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	NOP
	AND	$0F
	LD	E,A
	LD	D,$00
	LD	HL,KUJSWD
	ADD	HL,DE
	LD	A,(HL)
	SUB	$05	; ！
	LD	(SCY),A
	LD	(ENHELP),A
;
	LD	A,(WAVFLG)
	CP	$FE
	RET	Z
;
	LD	A,(WAVTIM)
	INC	A
	LD	(WAVTIM),A
;	CP	$C0  ;00
;	JR	NZ,ENDW010
;
;	XOR	A
;	LD	(WAVFLG),A
;	LD	(WAVTIM),A
;	RET
ENDW010
;;;	LD	A,(FRCNT)
;	SRL	A
;	SRL	A
;	LD	(WORK0),A
;	LD	A,(WAVTIM)
;;;	SLA	A
;	NOP
;	AND	%11100000
;	LD	E,A
;	LD	A,(WAVFLG)
;	CP	$FE
;	JR	NZ,ENDW020
;;
;	LD	A,E
;	XOR	%11100000
;	LD	E,A
;ENDW020
	LD	A,(EDWRK5)
;	RLA
;	RLA
;	RLA
;	RLA
;	RLA
;	AND	%11100000
	LD	(WORK1),A
;
	LD	HL,WAVCNT
	XOR	A
	LD	(HLI),A
	LD	(HLI),A
	LD	(HLI),A
;
ENDW030
	LD	A,(STAT)
	AND	%00000011
	JR	NZ,ENDW030
;
	LD	D,$0
ENDW002
	LD	A,(WAVCNT3)
	INC	A
	LD	(WAVCNT3),A
	AND	$01
	JR	NZ,ENDW002	; Wait !
;
	LD	A,(WAVCNT)
	ADD	A,$1
	LD	(WAVCNT),A
	LD	A,(WAVCNT2)
	ADC	A,$0
	LD	(WAVCNT2),A
;;	CP	$00
;;	JR	NZ,MAA01
	LD	A,(WAVCNT)
	CP	$50  ;68
	JP	Z,ENDW090
ENDW050
	LD	HL,WAVTIM
;	LD	A,(WORK0)
;	ADD	A,(HL)
;	AND	$1F
;	LD	HL,WORK1
;	OR	(HL)
	LD	A,(WAVCNT)
	ADD	A,(HL)
	AND	$1F
	LD	HL,WORK1
	OR	(HL)
	LD	E,A
	LD	HL,EWAVDT
	ADD	HL,DE
	LD	A,(HL)
	PUSH	AF
	LD	HL,SCCH
	ADD	A,(HL)
	LD	(SCX),A
	POP	AF
CHECK
	SRA	A
;;	NOP
;;	NOP
	LD	HL,ENHELP
	ADD	A,(HL)
	LD	(SCY),A
;
	JP	ENDW030
ENDW090
	XOR	A
	LD	(SCX),A
	RET
;------------------------------------
EWAVDT
;0
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$05,$09,$0C,$0D,$0E,$0E,$0F,$0F,$0F,$0E,$0E,$0D,$0C,$09,$05
 DB $00,$FB,$F7,$F4,$F3,$F2,$F2,$F1,$F1,$F1,$F2,$F2,$F3,$F4,$F7,$FB
;;1
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$04,$08,$0A,$0C,$0D,$0D,$0E,$0E,$0E,$0D,$0D,$0C,$0A,$08,$04
; DB $00,$FC,$F8,$F6,$F4,$F3,$F3,$F2,$F2,$F2,$F3,$F3,$F4,$F6,$F8,$FC
;2
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$04,$07,$09,$0B,$0C,$0C,$0D,$0D,$0D,$0C,$0C,$0B,$09,$07,$04
 DB $00,$FC,$F9,$F7,$F5,$F4,$F4,$F3,$F3,$F3,$F4,$F4,$F5,$F7,$F9,$FC
;;3
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$04,$06,$08,$0A,$0B,$0B,$0C,$0C,$0C,$0B,$0B,$0A,$08,$06,$04
; DB $00,$FC,$FA,$F8,$F6,$F5,$F5,$F4,$F4,$F4,$F5,$F5,$F6,$F8,$FA,$FC
;4
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$03,$05,$07,$08,$09,$0A,$0B,$0B,$0B,$0A,$09,$08,$07,$05,$03
 DB $00,$FD,$FB,$F9,$F8,$F7,$F6,$F5,$F5,$F5,$F6,$F7,$F8,$F9,$FB,$FD
;;5
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$03,$05,$06,$07,$08,$09,$0A,$0A,$0A,$09,$08,$07,$06,$05,$03
; DB $00,$FD,$FB,$FA,$F9,$F8,$F7,$F6,$F6,$F6,$F7,$F8,$F9,$FA,$FB,$FD
;6
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$03,$05,$06,$07,$08,$08,$09,$09,$09,$08,$08,$07,$06,$05,$03
 DB $00,$FD,$FB,$FA,$F9,$F8,$F8,$F7,$F7,$F7,$F8,$F8,$F9,$FA,$FB,$FD
;;7
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$02,$04,$05,$06,$07,$07,$08,$08,$08,$07,$07,$06,$05,$04,$02
; DB $00,$FE,$FC,$FB,$FA,$F9,$F9,$F8,$F8,$F8,$F9,$F9,$FA,$FB,$FC,$FE
;8
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$02,$04,$05,$05,$06,$06,$07,$07,$07,$06,$06,$05,$05,$04,$02
 DB $00,$FE,$FC,$FB,$FB,$FA,$FA,$F9,$F9,$F9,$FA,$FA,$FB,$FB,$FC,$FE
;;9
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$02,$03,$04,$04,$05,$05,$06,$06,$06,$05,$05,$04,$04,$03,$02
; DB $00,$FE,$FD,$FC,$FC,$FB,$FB,$FA,$FA,$FA,$FB,$FB,$FC,$FC,$FD,$FE
;A
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$01,$02,$03,$03,$04,$04,$05,$05,$05,$04,$04,$03,$03,$02,$01
 DB $00,$FF,$FE,$FD,$FD,$FC,$FC,$FB,$FB,$FB,$FC,$FC,$FD,$FD,$FE,$FF
;;B
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$01,$02,$02,$03,$03,$03,$04,$04,$04,$03,$03,$03,$02,$02,$01
; DB $00,$FF,$FE,$FE,$FD,$FD,$FD,$FC,$FC,$FC,$FD,$FD,$FD,$FE,$FE,$FF
;C
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$01,$01,$01,$02,$02,$02,$03,$03,$03,$02,$02,$02,$01,$01,$01
 DB $00,$FF,$FF,$FF,$FE,$FE,$FE,$FD,$FD,$FD,$FE,$FE,$FE,$FF,$FF,$FF
;;D
;;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$00,$01,$01,$01,$01,$02,$02,$02,$02,$02,$01,$01,$01,$01,$00
; DB $00,$00,$FF,$FF,$FF,$FF,$FE,$FE,$FE,$FE,$FE,$FF,$FF,$FF,$FF,$00
;E
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00,$00,$00
 DB $00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$00
;F
;;;;  0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
; DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
; DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
;
;****************************************
;*       サブルーチン                   *
;****************************************
ENDING
	LD	A,(KEYA2)
	AND	%00001100
	JR	Z,ENDG010
;
	LD	A,(HIMITSU2)
	AND	A
	JR	Z,ENDG010
;
	XOR	A
	LD	(ITMODE),A
ENDG010
	LD	A,(KEYA2)
	AND	%00000011
	JR	Z,ENDG012
;
	LD	A,(HIMITSU2)
	AND	A
	JR	Z,ENDG012
;
	CALL	ENDNXT
ENDG012
	LD	A,(EDTIM0)
	AND	A
	JR	Z,ENDG020
;
	DEC	A
	LD	(EDTIM0),A
ENDG020
	LD	A,(EDTIM1)
	AND	A
	JR	Z,ENDG030
;
	DEC	A
	LD	(EDTIM1),A
ENDG030
	LD	A,(EDTIM2)
	AND	A
	JR	Z,ENDG038
;
	DEC	A
	LD	(EDTIM2),A
ENDG038
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,ENDG03C
;
	LD	A,(EDTIM3)
	AND	A
	JR	Z,ENDG03C
;
	DEC	A
	LD	(EDTIM3),A
ENDG03C
	LD	A,(FRCNT)
	AND	$0F
	JR	NZ,ENDG03D
;
	LD	A,(EDTIM4)
	AND	A
	JR	Z,ENDG03D
;
	DEC	A
	LD	(EDTIM4),A
ENDG03D
	LD	A,(ITMODE)
	RST	00
	DW	ENDIN 
	DW	ENDINT
;- - - - - - - - - - - - - - - - - -
	DW	ENDA	;A
;- - - - - - - - - - - - - - - - - -
	DW	ENDC	;C
;- - - - - - - - - - - - - - - - - -
	DW	ENDB2	;B2
;- - - - - - - - - - - - - - - - - -
	DW	ENDB	;B
;- - - - - - - - - - - - - - - - - -
	DW	ENDD	;D
;- - - - - - - - - - - - - - - - - -
	DW	ENDE	;E
;- - - - - - - - - - - - - - - - - -
	DW	ENDF	;F
;
ENDBS	EQU	$05
ENDDS	EQU	$06
ENDFS	EQU	$08
;-------------------------------------
;-------------------------------------
EDUNDT
;;;;		0 1 2 3 4 5 6 7 8 9 A B C D E F
	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ;0
	DB	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 ;1
	DB	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 ;2
	DB	1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1 ;3
	DB	1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0 ;4
	DB	1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0 ;5
	DB	1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0 ;6
	DB	1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0 ;7
;-------------------------------------
EDINBP
EDINO1P
	DB	%11100100
	DB	%11100100
	DB	%11100100
	DB	%11100100
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EDINO0P
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
;------------------------------------------
ENDIN
	CALL	ERCLER
	JP	ITINC
;-------------------------------------------
ENDINT
	CALL	ENEMYL
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,ENDI100
;
	LD	A,(EDWRK1)
	INC	A
	LD	(EDWRK1),A
	CP	$0D
	JR	NZ,ENDI100
;
	JP	EDIN18
;----------------------------------------
ENDI100
	LD	A,(EDWRK1)
	LD	E,A
;
	LD	A,(FRCNT)
	AND	$03
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,EDINBP
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	(OBP1FG),A
;
	LD	HL,EDINO0P
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	RET
;	CALL	FDIN
;;
;	LD	A,(SBHR)
;	CP	$04
;	JR	NZ,EIN100
;
;	CALL	RAMCL2
;=============================================
EDIN18
	CALL	RAMCL2
;
	LD	HL,BGUNDT
	LD	DE,EDUNDT
	LD	C,$80
	LD	A,$01	;当たり無し！
EDIN19
	LD	A,(DE)
	INC	DE
	LD	(HLI),A
	DEC	C
	JR	NZ,EDIN19
;
	CALL	SOUNDCLR	;(S)
;
	LD	A,%00000001
	LD	(IE),A
	LD	A,$00
	LD	(LYC),A		; Part scroll line set !
;
	LD	HL,LCDCB
	RES	3,(HL)
;
	CALL	ERCLER
	CALL	ITINC
;
	LD	A,$59
	LD	(SOUND4),A	;(S)
;
	LD	A,$40
	LD	(EDTIM0),A
;
	LD	A,$04
	LD	(SBHR),A
EIN100
	RET
;-------------------------------------
;- - - - - - - - - - - - - - 
ITINC
	LD	HL,ITMODE
	INC	(HL)
	RET
;-------------------------------------
ENDA
	LD	A,$80
	LD	(WANFLG),A
	XOR	A
	LD	(DJFLAG),A
	LD	(DJSVBF),A
;
	LD	A,$01
	LD	(UTAFLG),A
;
	LD	A,$92
	LD	(GRNDPT),A	;町中心！
;
	LD	A,$FF
	LD	(PLFLSH),A
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	EA1000
	DW	EA2000
	DW	EA3000
	DW	EA4000
	DW	EA5000
	DW	EA6000
	DW	EA7000
	DW	EA8000
	DW	EA9000
	DW	EAA000
	DW	EAB000
	DW	EAB800
	DW	EABC00
	DW	EAC000
	DW	EAD000
	DW	EAE000
	DW	EAF000
	DW	EAG000
	DW	EAH000
	DW	EAI000
	DW	EAJ000
	DW	EAK000
	DW	EAL000
	DW	EAM000
	DW	EAN000
;-------------------------------------
EA1000
	LD	A,$FF
	LD	(WNDYPS),A
;
	LD	A,ECHA2
;;	LD	A,ECHA
	LD	(BLNKFG),A
;
	XOR	A
	LD	(SCCH),A
	LD	(TILTXD),A
	LD	(TILTYD),A
;
;;;	LD	A,$70
	LD	(SCCV),A
;
;;	LD	A,VRMB2  
;;	LD	(BLNKFG),A
;
	LD	HL,SCRLFG	; Scroll base display reset !
	LD	E,$0
EA1010
	XOR	A
	LD	(HLI),A
	INC	E
	LD	A,E
	CP	$C
	JR	NZ,EA1010
;
EDINC
	LD	HL,EDMODE
	INC	(HL)
	RET
;-------------------------------------
EA2000
	LD	A,EBGA
	LD	(VRFLG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;台！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$40
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$E0
;
	LD	A,EDAI
	CALL	ENIDSHL	;星！
;
	LD	HL,ENWRK0
	ADD	HL,DE
	INC	(HL)
;
	LD	A,$50
	LD	(PLXPSL),A
	LD	A,$98
	LD	(PLYPSL),A
;
	JP	EDINC
;-------------------------------------
EABGPD
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00010110
	DB	%00010110
	DB	%00010110
	DB	%00010110
	DB	%00100111
	DB	%00100111
	DB	%00100111
	DB	%00100111
EAOBPD
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
EAOBPD2
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%10010000
	DB	%10010000
	DB	%10010000
	DB	%10010000
;- - - - - - - - - - - - - -
EA3000
	LD	A,(EDTIM0)
	LD	E,A
	LD	A,(FRCNT)
	AND	$07
	OR	E
	JR	NZ,EA3010
;
	LD	A,(EDWRK1)
	INC	A
	LD	(EDWRK1),A
	CP	$0C
	JR	NZ,EA3010
;
	CALL  	EDINC
;--------------------------------------------
EA3010
;	AND	$07
;	JR	NZ,EA3030
;;
;	LD	A,(EDWRK1)
;	INC	A
;	LD	(EDWRK1),A
;	CP	$04
;	JR	NZ,EA3030
;
;	JP	EDINC
EA3030
	LD	A,(EDWRK1)
	LD	E,A
;
	LD	A,(FRCNT)
	AND	$03
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,EABGPD
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EAOBPD
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EAOBPD2
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
;;	RET
;-------------------------------------
EA4000
	LD	A,(EDWRK3)
	ADD	A,$18
	LD	(EDWRK3),A
	JR	NC,EA4008
;
	LD	HL,ENYPSL+$0E	;星移動！
	INC	(HL)
EA4008
	LD	A,(EDWRK2)
	ADD	A,$40
	LD	(EDWRK2),A
	JR	NC,EA4020
;
	LD	A,(SCCV)
	DEC	A
	LD	(SCCV),A
	CP	$90
	JR	NZ,EA4020
;
	CALL	EDINC
;
ERCLER
	XOR	A
	LD	(EDWRK0),A
	LD	(EDWRK1),A
	LD	(EDWRK2),A
	LD	(EDWRK3),A
	LD	(EDWRK4),A
	LD	(EDWRK5),A
	LD	(EDCNT0),A
	LD	(EDCNT1),A
	LD	(EDCNT2),A
	LD	(EDCNT3),A
	LD	(EDTIM0),A
	LD	(EDTIM1),A
	LD	(EDTIM2),A
	LD	(EDTIM3),A
EA4020
	RET
;--------------------------------------------------
EABTDT
	DB	$98,$00,$53,$A0
	DB	$98,$20,$53,$A0
;
	DB	$98,$40,$53,$A0
	DB	$98,$60,$53,$A0
;
	DB	$98,$80,$53,$A0
	DB	$98,$A0,$53,$A0
;
	DB	$98,$C0,$53,$A0
	DB	$98,$E0,$53,$A0
;
	DB	$99,$00,$53,$A0
	DB	$99,$20,$53,$A0
;
	DB	$99,$40,$53,$A0
	DB	$99,$60,$53,$A0
;
	DB	$99,$80,$53,$A0
	DB	$99,$A0,$53,$A0
;
	DB	$99,$C0,$53,$A0
	DB	$99,$E0,$53,$A0
;
	DB	$9A,$00,$53,$A0
	DB	$9A,$20,$53,$A0
;---------------------------------------------
EA5000
	LD	A,(EDWRK0)
	CP	$09
	JR	NZ,EA5010
;
;;	XOR	A
	LD	A,$F0
	LD	(SCCV),A
	JP	EDINC
EA5010
	LD	E,A
	INC	A
	LD	(EDWRK0),A
	SLA	E
	SLA	E
	SLA	E
	LD	D,$00
	LD	HL,EABTDT
	ADD	HL,DE
;
	LD	DE,VRAMD+1
;
	LD	C,$08	
EA5030
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,EA5030
;
	XOR	A
	LD	(DE),A
	RET
;==================================================
EA6000
	RET
;==================================================
EA7000
	CALL	ERCLER
;
	LD	A,$08
	LD	(EDTIM0),A
;
	JP	EDINC
;==================================================
EA8BGC
	DB	%00100111 ;0
	DB	%00100111 ;0
	DB	%11101011 ;1
	DB	%11111111 ;2
	DB	%11111111 ;3
	DB	%11111111 ;3
;
;	DB	%11000110 ;0
;	DB	%11000110 ;0
;	DB	%11011011 ;1
;	DB	%11101111 ;2
;	DB	%11111111 ;3
;	DB	%11111111 ;3
;- - - - - - - - - - - - - - - - - -
EA8000
	LD	A,(FRCNT)
	AND	$01
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EA8BGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EA8020
;
	LD	A,$08
	LD	(EDTIM0),A
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
	CP	$05
	JR	NZ,EA8020
;
	CALL	ERCLER
;
	JP	EDINC
EA8020
	RET
;==================================================
KUJIRADT
;- - -クジラ- - -
	DB	$9B,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$72,$73,$74,$A0,$A0,$A0,$A0,$A0,$A0,$A0
 DB  00;Dammy
	DB	$9B,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$A0,$7B,$7C,$7D,$A0,$A0,$A0,$A0,$A0,$A0,$A0
 DB  00;Dammy
	DB	$98,$00,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$A0,$05,$06,$07,$08,$09,$0A,$0B,$0C,$0D,$0E,$A0,$A0,$A0
 DB  00;Dammy
	DB	$98,$20,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$13,$14,$15,$16,$17,$18,$19,$1A,$1B,$1C,$1D,$1E,$1F,$A0,$A0
 DB  00;Dammy
	DB	$98,$40,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$22,$23,$24,$25,$26,$27,$28,$29,$2A,$2B,$2C,$2D,$2E,$2F,$A0,$A0
 DB  00;Dammy
	DB	$98,$60,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$31,$32,$33,$34,$35,$36,$37,$38,$39,$3A,$3B,$3C,$3D,$3E,$3F,$A0,$A0
 DB  00;Dammy
	DB	$98,$80,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$4A,$4B,$4C,$4D,$4E,$4F,$A0,$A0
 DB  00;Dammy
	DB	$98,$A0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$A0,$5B,$5C,$5D,$5E,$5F,$A0,$A0
 DB  00;Dammy
	DB	$98,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$6A,$A0,$6C,$6D,$6E,$6F,$A0,$A0
 DB  00;Dammy
	DB	$98,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$A0,$75,$76,$77,$78,$79,$7A,$A0,$A0,$A0,$7E,$AF,$A0,$A0
 DB  00;Dammy
;--------------------------------------------------
EA9000
	LD	A,(EDWRK0)
	CP	$0A
	JR	NZ,EA9010
;
	LD	A,$F0
	LD	(SCCV),A
;
EANEXT
	CALL	ERCLER
;
	LD	A,%00000001
	LD	(IE),A
	LD	A,$56
	LD	(LYC),A		; Part scroll line set !
;
	LD	A,$0C
;;	LD	A,$20
	LD	(EDTIM0),A
;
	LD	A,$FF
	LD	(WAVFLG),A
	LD	A,$09
	LD	(EDMODE),A
;
	LD	A,$1F
	LD	(SOUND2),A	;(S)
	RET
EA9010
	LD	E,A
	INC	A
	LD	(EDWRK0),A
	SLA	E
	SLA	E
	SLA	E
	LD	A,E
	SLA	E
	ADD	A,E	; x $18
	LD	E,A
	LD	D,$00
	LD	HL,KUJIRADT
	ADD	HL,DE
;
	LD	DE,VRAMD+1
;
	LD	C,$18	
EA9030
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,EA9030
	RET
;--------------------------------------------------
EAABGC
	DB	%11111111 ;3
	DB	%11111111 ;3
	DB	%11111111 ;3
	DB	%11111111 ;3
;
	DB	%10111111 ;2
	DB	%10111111 ;2
	DB	%10111111 ;2
	DB	%10111111 ;2
;
	DB	%01101011 ;1
	DB	%01101011 ;1
	DB	%01101011 ;1
	DB	%01101011 ;1
;
	DB	%00100111 ;0
	DB	%00100111 ;0
	DB	%00100111 ;0
	DB	%00100111 ;0
;
EAA000
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EAABGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAA020
;
	LD	A,(EDCNT0)
	CP	$0C
	JR	Z,EAA020
	INC	A
	LD	(EDCNT0),A
;
	LD	A,$0C
	LD	(EDTIM0),A
;
;;	CALL	ERCLER
;;;
;;	JP	EDINC
EAA020
	LD	A,(EDCNT0)
	CP	$07
;;;	CP	$03
	JR	C,EAA030
;
	LD	A,(EDCNT1)
	INC	A
	LD	(EDCNT1),A
	AND	$0F
	JR	NZ,EAA030
;
	LD	A,(EDWRK5)
	ADD	A,%00100000
	LD	(EDWRK5),A
;;	CP	%11100000
	JR	NZ,EAA030
;
;;	XOR	A
;;	LD	A,$FF
	LD	A,$FE
	LD	(WAVFLG),A
;
	CALL	ERCLER
;
	LD	A,$40
	LD	(EDTIM0),A
;
	LD	A,%00000011
	LD	(IE),A
;
	JP	EDINC
EAA030
	RET
;=======================================
EAB000
;	LD	A,(KEYA2)
;	AND	%11000000
;	JR	Z,EAB020
;;
;	LD	A,$FF
;	LD	(WAVFLG),A
;;
;	LD	A,%11100000
;	LD	(EDWRK5),A
;;
;	LD	A,$0C
;	LD	(EDTIM0),A
;	JP	EDINC
;EAB020
;	LD	A,(KEYA2)
;	AND	%00110000
;	JR	Z,EAB030
;
;	LD	A,(MSGEFG)
;	AND	A
;	JR	NZ,EAB030
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAB030
;
	CALL	EDINC
;
	LD	A,$D0
KUJIMS
	CALL	EDMSCK
;
	LD	A,$17
	LD	(SOUND2),A	;(S)
EAB030
	RET
;=======================================
EAB800
	LD	A,(MSGEFG)
	AND	A
	JR	NZ,EAB860
;
;	LD	A,(MSANSR)
;	AND	A
;	JR	Z,EAB810
;;
;	LD	A,$D3
;	JP	KUJIMS	
;;;	CALL	EDMSCK
;;;	
;	RET
;
EAB810
;F	LD	A,$D1
;F	CALL	KUJIMS	
;;	CALL	EDMSCK
;
	CALL	EDINC
EAB860
	RET
;=======================================
EABC00
	LD	A,(MSGEFG)
	AND	A
	JR	NZ,EABC10
;
	LD	A,%00000001
	LD	(IE),A
;
	LD	A,$FF
	LD	(WAVFLG),A
;
	LD	A,%11100000
	LD	(EDWRK5),A
;
	LD	A,$50
	LD	(EDTIM0),A
;
	LD	A,$1F
	LD	(SOUND2),A	;(S)
;
	CALL	EDINC
EABC10
	RET
;=======================================
EACBGC
	DB	%00100111 ;0
	DB	%00100111 ;0
	DB	%00100111 ;0
	DB	%00100111 ;0
;
	DB	%01101011 ;1
	DB	%01101011 ;1
	DB	%01101011 ;1
	DB	%01101011 ;1
;
	DB	%10111111 ;2
	DB	%10111111 ;2
	DB	%10111111 ;2
	DB	%10111111 ;2
;
	DB	%11111111 ;3
	DB	%11111111 ;3
	DB	%11111111 ;3
	DB	%11111111 ;3
;
EAC000
;;	LD	A,(EDTIM0)
;;	AND	A
;;	JR	NZ,EAC030
;
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EACBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;
	LD	A,(EDWRK5)
	CP	%10100000
	JR	NC,EAC021
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAC021
;
	LD	A,$0C
	LD	(EDTIM0),A
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
	CP	$0C+1
;;	CP	$05
	JR	NZ,EAC021
;
	XOR	A
	LD	(WAVFLG),A
;
	CALL	ERCLER
;
	LD	A,$30
	LD	(EDTIM0),A
;
	LD	A,%00000001
	LD	(IE),A
	JP	EDINC
EAC021
	LD	A,(EDCNT1)
	INC	A
	LD	(EDCNT1),A
	AND	$0F
	JR	NZ,EAC030
;
	LD	A,(EDWRK5)
	AND	A
	JR	Z,EAC030
	SUB	%00100000
	LD	(EDWRK5),A
;;;	JR	NZ,EAC030
EAC030
	RET
;================================================
KUJIRACL
;- - -クジラ 消す- - -
	DB	$9B,$C0,$53,$A0
	DB	$9B,$E0,$53,$A0
	DB	$98,$00,$53,$A0
	DB	$98,$20,$53,$A0
	DB	$98,$40,$53,$A0
	DB	$98,$60,$53,$A0
	DB	$98,$80,$53,$A0
	DB	$98,$A0,$53,$A0
	DB	$98,$C0,$53,$A0
	DB	$98,$E0,$53,$A0
;
EAD000
	LD	A,(EDTIM0)
	AND	A
	RET	NZ
;
	LD	A,(EDWRK0)
	CP	$0A
	JR	NZ,EAD0010
;
	LD	A,$D2
	CALL	KUJIMS	
;;	CALL	EDMSCK
;
	LD	A,%00100111
	LD	(BGPFG),A
;
	JP  	EDINC
;-------------------------------
EAD0010
	LD	E,A
	INC	A
	LD	(EDWRK0),A
	SLA	E
	SLA	E
	LD	D,$00
	LD	HL,KUJIRACL
	ADD	HL,DE
;
	LD	DE,VRAMD+1
;
	LD	C,$04	
EAD030
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,EAD030
;
	XOR	A
	LD	(DE),A
	RET
;================================================
EAE000
	LD	A,(MSGEFG)
	AND	A
	JR	NZ,EAE0010
;
	CALL	ERCLER
;
	LD	A,$03
	LD	(PLCHPT),A
;
	LD	A,$0C
	LD	(CHTRF2),A	;楽器転送！
	CALL	EDINC
EAE0010
	RET
;================================================
EAF000
	LD	A,(EDWRK0)
	CP	$07
	JR	NZ,EAF010
;
	CALL	ERCLER
;
	LD	A,$80
	LD	(EDTIM0),A
	JP	EDINC
;
EAF010	
	INC	A
	LD	(EDWRK0),A
;
	LD	A,$0C
	LD	(CHTRF2),A	;楽器転送！
	RET
;================================================
EGAKSTXD
	DB	$48,$58,$60,$60,$58,$48,$40,$40
EGAKSTYD
	DB	$40,$40,$48,$58,$60,$60,$58,$48
EGAKSTXS
	DB	$FF,$01,$02,$02,$01,$FF,$FE,$FE
EGAKSTYS
	DB	$FE,$FE,$FF,$01,$02,$02,$01,$FF
EGAKSTPT
	DB	$00,$01,$02,$03,$04,$05,$06,$07
EGAKSTOI
	DB	$00,$08,$10,$18,$20,$28,$30,$38
;- - - - - - - - - - - - -
;================================================
EAG000	;セイレーン楽器セット！
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAG020
;
	LD	A,$04
	LD	(PLCHPT),A
;
	LD	A,$3F
	LD	(SOUND4),A	;(S)
EAG010
	LD	A,EDAI
	CALL	ENIDSHL
;
	LD	A,(EDWRK0)
	LD	C,A
	LD	B,$00
	LD	HL,EGAKSTXD
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),A	
	LD	HL,EGAKSTYD
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENYPSL
	ADD	HL,DE
	SUB	$20
	LD	(HL),A	
;
	LD	HL,EGAKSTXS
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENXSPD
	ADD	HL,DE
	LD	(HL),A	
	LD	HL,EGAKSTYS
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENYSPD
	ADD	HL,DE
	LD	(HL),A	
	LD	HL,EGAKSTPT
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENCHPT
	ADD	HL,DE
	LD	(HL),A	
	LD	HL,EGAKSTOI
	ADD	HL,BC
	LD	A,(HL)
	LD	HL,ENWRK1
	ADD	HL,DE
	LD	(HL),A	
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$03
;
	LD	HL,ENMOD0
	ADD	HL,DE
	LD	(HL),%11000010
;
	LD	HL,ENTIM3
	ADD	HL,DE
	LD	(HL),$20
;
	LD	A,C
	INC	A
	LD	(EDWRK0),A
	CP	$08
	JR	NZ,EAG010
;
	CALL	ERCLER
;
	LD	A,$A0
	LD	(EDTIM0),A
;
	CALL	EDINC
EAG020
	RET
;================================================
EAH000
	LD	A,(EDTIM0)
	CP	$9E
	JR	NZ,EAH0F0
;
	LD	HL,SOUND1
	LD	(HL),$34	;(S)
EAH0F0
	AND	A
	JR	NZ,EAH010
;
;	LD	A,$80
;;;	LD	A,$A0
;	LD	(EDTIM0),A
;
	CALL	EDINC
EAH010
	RET
;================================================
EAI000
	LD	A,(EDWRK0)
	RST	00
	DW	EAI1000	;台！
;- - - - - -
;;	DW	EAI1800	;卵山全景セット！
;;	DW	EAI1900	;卵山全景セット！
;;	DW	EAI1A00	;卵山全景セット！
	DW	EAI2000	;地上1セット！
	DW	EAI3000	;地上1セット！
	DW	EAI4000	;地上2セット！
	DW	EAI5000	;地上2セット！
	DW	EAI6000	;地上3セット！
	DW	EAI7000	;地上3セット！
	DW	EAI8000	;地上4セット！
	DW	EAI9000	;地上4セット！
	DW	EAIA000	;地上5セット！
	DW	EAIB000	;地上5セット！
	DW	EAIC000	;山！
	DW	EAIC800	;卵山全景セット！
	DW	EAIC900	;卵山全景セット！
	DW	EAICA00	;卵山全景セット！
	DW	EAICB00	;卵山全景セット！
;- - - - - -
	DW	EAID000	;台揺れ！
	DW	EAIE000	;台揺れ！
;-----------------------------------------------
;EAI1000
;	LD	A,(EDTIM0)
;	AND	A
;	JR	NZ,EAI1020
;;
;;	XOR	A
;;	LD	(SCCV),A
;;;
;;	CALL	EDENCL
;;;
;;	LD	A,ECHA1
;;	LD	(BLNKFG),A
;
EDW0INC
	LD	HL,EDWRK0
	INC	(HL)
	RET
;------------------------------------------
EDENCL
	LD	E,ENNO
	LD	HL,ENMODE
	XOR	A
EDEC10
	LD	(HLI),A
	DEC	E
	JR	NZ,EDEC10
	RET
;------------------------------------------
EAIBGD
	DB	%11111111
	DB	%11111111
	DB	%11111111
	DB	%11111111
	DB	%10101010
	DB	%10101010
	DB	%10101010
	DB	%10101010
	DB	%01010101
	DB	%01010101
	DB	%01010101
	DB	%01010101
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAIOB0D
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAIOB1D
	DB	%10010000
	DB	%10010000
	DB	%10010000
	DB	%10010000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAI1000
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EAI1030
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
	CP	$0C
	JR	NZ,EAI1030
;
;;	LD	A,ECHYM		; Bank set!
	LD	A,ECHA1		; Bank set!
	LD	(BLNKFG),A
;
	XOR	A
	LD	(SCCV),A
;
	CALL	EDENCL
;
	JP	EDW0INC
EAI1030
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EAIBGD	
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EAIOB0D	
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EAIOB1D	
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET
;----------------------------------
EAI010
	LD	A,(FRCNT)
	LD	E,$01
	AND	$04
	JR	Z,EAI020
	LD	E,$FE
EAI020
	LD	HL,TILTXD
	LD	(HL),E
	RET
;-----------------------------------------------
;EAI1800
;	XOR	A
;	LD	(EDCNT0),A
;;
;	LD	A,EBGY
;	LD	(VRFLG),A
;	JP	EDW0INC
;-----------------------------------------------
EDTM	EQU	$50
;
;EAI1900
;	CALL	EAFDIN2
;	JR	NZ,EAI1910
;;
;	LD	A,EDTM ;$80
;	LD	(EDTIM0),A
;;
;	JP	EDW0INC
;EAI1910
;	RET
;-----------------------------------------------
;--敵セット １--
;EAI1A00
;	LD	A,(EDTIM0)
;	AND	A
;	JR	NZ,EAI1A10
;;
;	CALL	EAFDOUT2
;	JR	NZ,EAI1A10
;
;	LD	A,ECHA1		; Bank set!
;	LD	(BLNKFG),A
;;
;	CALL	EDENCL
;;
;	JP	EDW0INC
;EAI1A10
;	RET
;-----------------------------------------------
EAI2000
	XOR	A
	LD	(EDCNT0),A
;
	LD	A,EBGA3
	LD	(VRFLG),A
;
	LD	A,WANWAN
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$48
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	A,FOXDOG
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$68
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$30
;
	LD	A,OZWAN 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$2C
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$58
;
	LD	A,OZWAN 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$52
;
	LD	HL,ENWRK0
	ADD	HL,DE
	INC	(HL)
;
	JP	EDW0INC
;- - - - - - - - - - - - - - - - - -
;-----------------------------------------------
EAI3000
	CALL	EAFDIN
	JR	NZ,EAI3010
;
	LD	A,EDTM ;$80
	LD	(EDTIM0),A
;
	JP	EDW0INC
EAI3010
	RET
;-----------------------------------------------
KYTEST
	LD	A,(KEYA1)
	AND	$30
	RET	NZ
;;	POP	AF
	NOP
	RET
;-----------------------------------------------
EAI4000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAI4010
;
	CALL	KYTEST
;
	CALL	EAFDOUT
	JR	NZ,EAI4010
;
	LD	A,EBGA1
	LD	(VRFLG),A
;
	CALL	EDENCL
;
	LD	A,KODOMB
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$48
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENSTAT
	ADD	HL,DE
	INC	(HL)
;
	LD	HL,ENTIM0
	ADD	HL,DE
	LD	(HL),$20
;
	LD	HL,ENMUKI
	ADD	HL,DE
	LD	(HL),$02
;
	LD	A,KODOMC
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$78
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	JP	EDW0INC
EAI4010
	RET
;-----------------------------------------------
EAI5000
	CALL	EAFDIN
	JR	NZ,EAI5010
;
	LD	A,EDTM ;$80
	LD	(EDTIM0),A
;
	JP	EDW0INC
EAI5010
	RET
;-----------------------------------------------
EAI6000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAI6010
;
	CALL	KYTEST
;
	CALL	EAFDOUT
	JR	NZ,EAI6010
;
	LD	A,EBGA5
	LD	(VRFLG),A
;
	CALL	EDENCL
;
	LD	A,UNIUNI
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$28
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$40
;
	LD	A,OCTA1 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$48
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	A,OCTA1 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$68
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	JP	EDW0INC
EAI6010
	RET
;-----------------------------------------------
EAI7000
	CALL	EAFDIN
	JR	NZ,EAI7010
;
	LD	A,EDTM ;$80
	LD	(EDTIM0),A
;
	JP	EDW0INC
EAI7010
	RET
;-----------------------------------------------
EAI8000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAI8010
;
	CALL	KYTEST
;
	CALL	EAFDOUT
	JR	NZ,EAI8010
;
	LD	A,EBGA4
	LD	(VRFLG),A
;
	CALL	EDENCL
;
	LD	A,PAPA0 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$78
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	JP	EDW0INC
EAI8010
	RET
;-----------------------------------------------
EAI9000
	CALL	EAFDIN
	JR	NZ,EAI9010
;
	LD	A,EDTM ;$80
	LD	(EDTIM0),A
;
	JP	EDW0INC
EAI9010
	RET
;-----------------------------------------------
EAIA000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAIA010
;
	CALL	KYTEST
;
	CALL	EAFDOUT
	JR	NZ,EAIA010
;
	LD	A,EBGA2
	LD	(VRFLG),A
;
	CALL	EDENCL
;
	LD	A,GIRL0 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$28
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	A,BTFLY 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$18
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$4C
;
	LD	A,BTFLY 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$38
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$54
;
	LD	A,BTFLY 
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$28
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$30
;
	LD	A,FOXDOG
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$78
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	JP	EDW0INC
EAIA010
	RET
;-----------------------------------------------
EAIB000
	CALL	EAFDIN
	JR	NZ,EAIB010
;
	LD	A,$C0  ;EDTM ;$80
	LD	(EDTIM0),A
;
	JP	EDW0INC
EAIB010
	RET
;-----------------------------------------------
EAIC000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAIC010
;
	CALL	KYTEST
;
	CALL	EAFDOUT
	JR	NZ,EAIC010
;
	LD	A,ECHYM
	LD	(BLNKFG),A
;
	CALL	EDENCL
;
	JP	EDW0INC
EAIC010
	RET
;-----------------------------------------------
EAIC800
	LD	A,EBGY
	LD	(VRFLG),A
;
	JP	EDW0INC
;-----------------------------------------------
EAIC900
	CALL	EAFDIN2
	JR	NZ,EAIC910
;
	LD	A,$A0
	LD	(EDTIM0),A
;
	LD	A,$FF
	LD	(EDCNT1),A
;
	JP	EDW0INC
EAIC910
	RET
;-----------------------------------------------
EAICA00
	LD	A,(EDTIM0)
	CP	$01
	JR	NZ,EAICA02
;
	LD	HL,SOUND3	;(S)
	LD	(HL),$35
EAICA02
	AND	A
	JR	NZ,EAICA10
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,EAICA10
;
	LD	A,(EDCNT1)
	CP	63
	JR	Z,EAICA20
	INC	A
	LD	(EDCNT1),A
;
	LD	A,$0E
	LD	(CHTRF2),A	;山じわじわ消す！
	RET
;
EAICA20
	LD	A,$40
	LD	(EDTIM0),A
	JP	EDW0INC
;-----------------------------------------------
EAICB00
	LD	A,(EDTIM0)
	AND	A
	RET	NZ
;
;;	CALL	KYTEST
;
;;	CALL	EAFDOUT
;;	JR	NZ,EAICA10
;
	XOR	A
	LD	(BGPFG),A
	LD	(OBP0FG),A
	LD	(OBP1FG),A
;
	LD	A,ECHA
	LD	(BLNKFG),A
;
	JP	EDW0INC
EAICA10
	RET
;---------------------
EAFIBGD
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%11100100
	DB	%11100100
	DB	%11100100
	DB	%11100100
EAFIO0D
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
EAFDIN
	LD	A,(FRCNT)
	AND	$01
	JR	NZ,EDFI10
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
EDFI10
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EAFIBGD
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EAFIO0D
	JP	EDFSUB
;-------------------------------
EAFDIN2
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,EDFI210
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
EDFI210
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EIBGC2
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	JR	EDFSUB2
;
;;	ADD	HL,DE
;;	LD	A,(HL)
;;	LD	(OBP0FG),A
;;
;;	LD	A,(EDCNT0)
;;	CP	$0C
;;	RET
;---------------------
EAFOBGD
	DB	%11100100
	DB	%11100100
	DB	%11100100
	DB	%11100100
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%10010100
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%01000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAFOO0D
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00011000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAFDOUT
	LD	A,(FRCNT)
	AND	$0F
	JR	NZ,EDFO10
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
EDFO10
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EAFOBGD
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EAFOO0D
EDFSUB
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
;
EDFSUB2
	LD	A,(EDCNT0)
	CP	$0C
	JR	NZ,EDFO090
;
	XOR	A
	LD	(EDCNT0),A
EDFO090
	RET
;===================================
EAFDOUT2
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EDFO210
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
EDFO210
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EBBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	JR	EDFSUB2
;- - - - - - - - - - - - - - - - - -
;EAI2400
;	LD	A,OPBST
;	LD	(BLNKFG),A
;;
;	XOR	A
;	LD	(EDWRK1),A
;	LD	(SCCH),A
;;
;	JP	EDW0INC
;;-----------------------------------------------
;EAI3000
;	LD	A,(EDWRK1)
;	RST	00
;	DW	EAI3100
;	DW	EAI3200
;-----------------------------------------------
;EAI3100
;	LD	A,EBGY
;	LD	(VRFLG),A
;;
;	LD	A,$A0
;	LD	(EDTIM0),A
;;
;	JR	EDW1INC	
;;-----------------------------------------------
EAID000
	LD	A,%11001001
	LD	(BGPFG),A
	LD	A,%00011100
	LD	(OBP0FG),A
	LD	A,%10010000
	LD	(OBP1FG),A
;
	LD	A,(EDTIM0)
	AND	A
	JP	NZ,EAI010
;
	LD	A,$00
	LD	(TILTXD),A
;
	LD	A,$00
	LD	(PLCHPT),A
;
	LD	A,ECHA
	LD	(BLNKFG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;台！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$40
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENSTAT
	ADD	HL,DE
	LD	(HL),$02
;
	LD	A,EDAI
	CALL	ENIDSHL	;星！
;
	LD	HL,ENWRK0
	ADD	HL,DE
	INC	(HL)
;
	LD	A,$50
	LD	(PLXPSL),A
;
;	LD	HL,LCDCB
;	SET	1,(HL)	; OBJ表示復帰！
	LD	HL,LCDCB
	SET	3,(HL)
;
;;	LD	A,$30
	LD	A,$A0
	LD	(EDTIM0),A
;
	LD	A,%11111111
	LD	(BGPFG),A
;
	LD	A,$5C
	LD	(PLYPSL),A
;
	LD	A,$34
	LD	(SOUND3),A	;(S)
;
	JP	EDW0INC
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
;-----------------------------------------------
EAIE000
;	LD	A,(EDWRK1)
;	RST	00
;	DW	EAI42000
;	DW	EAI41000
;
;EAI41000
;	LD	A,ENDBT
;	LD	(VRFLG),A
;;
;	JR	EDW1INC
;;
;EAI42000
	LD	A,(EDTIM0)
	AND	A
	JP	NZ,EAI010
;
	LD	(TILTXD),A
;
;;	LD	HL,LCDCB
;;	SET	3,(HL)
;;
;	LD	A,$00
;	LD	(SCCV),A
;
	CALL	ERCLER
;
	JP	EDINC
;================================================
EAJ000
	LD	A,(PLYPSL)
	SUB	$02
	LD	(PLYPSL),A
;
	LD	A,(SCCV)
	ADD	A,$08
	LD	(SCCV),A
	CP	$60
	JR	NZ,EAJ010
;
	LD	A,(ENSTAT+$0F)
	INC	A
	LD	(ENSTAT+$0F),A	;台崩れる！
;
	LD	A,$40
	LD	(EDTIM3),A
;
	CALL	EDINC
EAJ010
	CALL	EMIZUCS
	RET
;================================================
EMIZUCL
	DB	%01000011
	DB	%00010011
	DB	%00000111
EMIZUCL2
	DB	%10000011
	DB	%00100011
	DB	%00001011
EMIZUCL3
	DB	%01010011
	DB	%00010111
	DB	%01000111
EMIZUCL4
	DB	%00100111
	DB	%01001011
	DB	%10010011
;======================================================
EMZSWD
	DB	$60,$60,$61,$62,$63,$64,$65,$65
	DB	$65,$65,$64,$63,$62,$61,$60,$60
;- - - - - - - - - - - - - - - -
EAK000
	CALL	EMIZUCS
;
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,EAK010
;
;;	CALL	ERCLER
;
	JP	EDINC
;------------------------------------------
EAK010
	LD	A,(ENYPSL+$0E)	;星移動！
	ADD	A,$08
	LD	(ENYPSL+$0E),A
;	
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
	RRA
	RRA
	RRA
	NOP
	AND	$0F
	LD	E,A
	LD	D,$00
	LD	HL,EMZSWD
	ADD	HL,DE
	LD	A,(HL)
	LD	(SCCV),A
;
	CALL	SCVPLS
	RET
;----------------------------------------------
;;EPLSPDT
;;	DB	$05,$06,$07,$08,$09,$0A,$0B,$0C
;
EMIZUCS
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	AND	$07
	ADD	A,$05
	LD	(PLCHPT),A
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAK050
;
	LD	A,$03
	LD	(EDTIM0),A
;
	LD	A,(EDWRK0)
	INC	A
	LD	(EDWRK0),A
	CP	$03
	JR	NZ,EAK050
;
	XOR	A
	LD	(EDWRK0),A
EAK050
	LD	A,(EDWRK0)
	LD	E,A
	LD	D,$00
	LD	HL,EMIZUCL4
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	RET
;-----------------------------------
SCVPLS
	LD	A,(SCCV)
	CPL
	INC	A
	SUB	$A0
	ADD	A,$3C
	LD	(PLYPSL),A
	RET
;
;===============================================
EMIZURD
	DB	$9C,$00,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$20,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$40,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$60,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$80,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$A0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9C,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$00,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$20,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$40,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$60,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$80,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$A0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9D,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$00,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$20,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$40,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$60,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$80,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$A0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9E,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$00,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$20,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$40,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$60,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$80,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$A0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$C0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$80,$81,$80,$81,$80,$81,$80,$81,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
	DB	$9F,$E0,$13
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $A0,$A0,$A0,$A0,$A0,$A0,$90,$91,$90,$91,$90,$91,$90,$91,$A0,$A0,$A0,$A0,$A0,$A0
 DB 00 ;DAMMY
;---------------------------------
EAL000
	CALL	EMIZUCS
;
	LD	A,(ENYPSL+$0E)	;星移動！
	ADD	A,$04
	LD	(ENYPSL+$0E),A
;
	LD	A,(EDCNT1)
	INC	A
	LD	(EDCNT1),A	
;
;;	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EALL008
;
	LD	A,(EDCNT2)
	CP	$08
	JR	Z,EALL008
	INC	A
	LD	(EDCNT2),A
EALL008
	LD	A,(EDCNT2)
	LD	E,A
	LD	A,(SCCV)
	ADD	A,E  ;$002
	LD	(SCCV),A
	CALL	SCVPLS
;
	LD	A,(PLYPSL)
	CP	$F0
	JR	C,EALL00A
;
	XOR	A
	LD	(ENMODE+$0F),A	;PLAYER CLEAR !
EALL00A
	LD	A,(EDCNT1)
	AND	$01
	RET	NZ
;
	LD	A,(EDWRK1)
	CP	$20
	JR	NZ,EALL010
;
	CALL	ERCLER
;
	CALL	EDINC
	RET
EALL010
	LD	E,A
	INC	A
	LD	(EDWRK1),A
	LD	D,$00
	SLA	E
	RL	D
	SLA	E
	RL	D
	SLA	E
	RL	D
	LD	A,E
;
	SLA	E
	RL	D
	ADD	A,E	; x $18
	LD	E,A
;
	LD	A,D
	ADC	A,$00
	LD	D,A
;
	LD	HL,EMIZURD
	ADD	HL,DE
;
	LD	DE,VRAMD+1
;
	LD	C,$18	
EAL030
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,EAL030
	RET
;---------------------------------------------
EAMBGC
;0
	DB	%00100111
	DB	%00100111
	DB	%00100111
	DB	%00100111
;1
	DB	%00010110
	DB	%00010110
	DB	%00010110
	DB	%00010110
;2
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
;3
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAMO0C
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011100
	DB	%00011000
	DB	%00011000
	DB	%00001000
	DB	%00001000
	DB	%00001000
	DB	%00001000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EAMO1C 
	DB	%10010000
	DB	%10010000
	DB	%10010000
	DB	%10010000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%01010000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
; - - - - - - - - - - - - - - - - - -
EAM000
	LD	A,(ENYPSL+$0E)	;星移動！
	ADD	A,$02
	LD	(ENYPSL+$0E),A
;	
;;	CALL	EMIZUCS
;
	LD	A,(SCCV)
	ADD	A,$04
	LD	(SCCV),A
;
	LD	A,(FRCNT)
	AND	$07
;;	AND	$03
	JR	NZ,EAM010
;
	LD	A,(EDCNT0)
	CP	$0C
	JR	NZ,EAM008
;
	CALL	ERCLER
;
	LD	A,$C0
	LD	(EDTIM0),A
	JP	EDINC
EAM008
	INC	A
	LD	(EDCNT0),A
EAM010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EAMBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EAMO0C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EAMO1C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET	
;=================================================
EAN000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EAN010
;
	XOR	A
	LD	(EDMODE),A
;;	LD	(ENMODE+$0D),A
	LD	(ENMODE+$0E),A	;星消す！
	LD	(ENMODE+$0F),A
	LD	(NAMIOTO),A
;
	LD	A,$80
	LD	(KAMOSE),A
;
	LD	HL,LCDCB
	RES	3,(HL)
;
	LD	HL,ITMODE
	INC	(HL)	;エンディング Ｂ２ヘ
EAN010
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B2				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDB2
	CALL	NAMISE
;
	LD	DE,$98E0
	CALL	NAMIVS
;
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	EB21000
	DW	EB22000
	DW	EB23000
	DW	EB24000
;-------------------------------------
EB21000
	LD	A,ECHB2
	LD	(BLNKFG),A
;
;	XOR	A
;	LD	(SCCH),A
;	LD	(SCCV),A
;	LD	(TILTXD),A
;	LD	(TILTYD),A
;
	CALL	ERCLER
	JP	EDINC
;-------------------------------------
EB22000
	LD	A,EBGB2
	LD	(VRFLG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;リンクセット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$48
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$04
;
	LD	A,EDAI
	CALL	ENIDSHL	;wood 1 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$28
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$68
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$05
;
	LD	A,EDAI
	CALL	ENIDSHL	;wood 2 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$78
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$05
;
	LD	HL,ENCHPT
	ADD	HL,DE
	INC	(HL)
	JP	EDINC
;-------------------------------------
EB23BGC
;3
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00011001
;	DB	%00011001
;	DB	%00011010
;	DB	%00011010
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
EB23O0C
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00011001
	DB	%00011001
	DB	%00011010
	DB	%00011010
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
EB23O1C 
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%01010001
	DB	%01010001
	DB	%01010010
	DB	%01010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
; - - - - - - - - - - - - - - - - - -
EB23000
;	LD	A,(FRCNT)
;	AND	$07
;	JR	NZ,EB23010
;;
;	LD	A,(EDCNT0)
;	CP	$0C
;	JR	NZ,EB23008
;
	CALL	ERCLER
;
	LD	A,$60
	LD	(EDTIM3),A
	JP	EDINC
;EB23008
;	INC	A
;	LD	(EDCNT0),A
;EB23010
;	LD	A,(FRCNT)
;	AND	$03
;	LD	E,A
;	LD	A,(EDCNT0)
;	ADD	A,E
;	LD	E,A
;	LD	D,$00
;	LD	HL,EB23BGC
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(BGPFG),A
;	LD	(OBP0FG),A
;	LD	HL,EB23O0C
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(OBP0FG),A
;	LD	HL,EB23O1C
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(OBP1FG),A
;	RET
;==========================================
EB24000
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,EB24010
;
;	LD	A,(KEYA2)
;	AND	$30
;	JR	Z,EB24010
;
	XOR	A
	LD	(EDMODE),A
	LD	(ENMODE+$0C),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0D),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0E),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0F),A	;ＬＩＮＫ ＣＬＥＡＲ
;
	LD	HL,ITMODE
	INC	(HL)	;エンディング Ｃヘ
EB24010
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	C				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDC
	CALL	NAMISE
;
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	EC1000
	DW	EC2000
	DW	EC3000
	DW	EC4000
	DW	EC5000
;-------------------------------------
EC1000
	LD	A,ECHC
	LD	(BLNKFG),A
;
	XOR	A
	LD	(SCCH),A
	LD	(SCCV),A
	LD	(TILTXD),A
	LD	(TILTYD),A
;
	LD	A,$3D
	LD	(SOUND4),A	;(S)
;
	CALL	ERCLER
	JP	EDINC
;-------------------------------------
EC2000
	LD	A,EBGC
	LD	(VRFLG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;かもめ 1 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$18
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$20
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$06
;
	LD	HL,ENXSPD
	ADD	HL,DE
	LD	(HL),$03
;
	LD	A,EDAI
	CALL	ENIDSHL	;かもめ 2 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$78
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$78
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$06
;
	LD	HL,ENXSPD
	ADD	HL,DE
	LD	(HL),$FD
;
	LD	HL,ENCHPT
	ADD	HL,DE
	LD	(HL),$03
;
	LD	A,EDAI
	CALL	ENIDSHL	; 光 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$68
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$07
;
	LD	A,$60
	LD	(EDTIM3),A
	JP	EDINC
;-------------------------------------
EBCBGC
;3
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00011001
;	DB	%00011001
;	DB	%00011010
;	DB	%00011010
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
EBCO0C
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00011001
	DB	%00011001
	DB	%00011010
	DB	%00011010
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
EBCO1C 
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%00000001
	DB	%01010001
	DB	%01010001
	DB	%01010001
	DB	%01010010
	DB	%01010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
EC3000
	LD	A,(FRCNT)
	AND	$0F
	JR	NZ,EC3010
;
	LD	A,(EDCNT0)
	CP	$10
	JR	NZ,EBC008
;
	CALL	ERCLER
;
	LD	A,$60
	LD	(EDTIM3),A
	JP	EDINC
EBC008
	INC	A
	LD	(EDCNT0),A
EC3010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EBCBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;;	LD	(OBP0FG),A
	LD	HL,EBCO0C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EBCO1C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET
;-------------------------------------
EC4000
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,EC4010
;
;	LD	A,(KEYA2)
;	AND	$30
;	JR	Z,EC4010
;
;	XOR	A
;	LD	(EDMODE),A
;	LD	(ENMODE+$0D),A	;ＬＩＮＫ ＣＬＥＡＲ
;	LD	(ENMODE+$0E),A	;ＬＩＮＫ ＣＬＥＡＲ
;	LD	(ENMODE+$0F),A	;ＬＩＮＫ ＣＬＥＡＲ
;;
;	LD	HL,ITMODE
;	INC	(HL)	;エンディング B へ
;
	CALL	ERCLER
	JP	EDINC
EC4010
	RET
;-------------------------------------
;EBCBGC2
;;3
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011010
;	DB	%00011010
;	DB	%00011010
;	DB	%00011010
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;EBCO0C2
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011010
;	DB	%00011010
;	DB	%00011010
;	DB	%00011010
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;EBCO1C2
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000001
;	DB	%00000001
;	DB	%00000001
;	DB	%00000001
;	DB	%01010001
;	DB	%01010001
;	DB	%01010001
;	DB	%01010010
;	DB	%10010010
;	DB	%10010010
;	DB	%10010010
;	DB	%10010010
;-------------------------------------
EC5000
;	LD	A,(FRCNT)
;	AND	$07
;	JR	NZ,EC5010
;;
;	LD	A,(EDCNT0)
;	CP	$0C
;	JR	NZ,EC5008
;
	CALL	ERCLER
;
	XOR	A
	LD	(EDMODE),A
	LD	(ENMODE+$0D),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0E),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0F),A	;ＬＩＮＫ ＣＬＥＡＲ
;
	LD	HL,ITMODE
	INC	(HL)	;エンディング B へ
	RET
;;	JP	EDINC
;EC5008
;	INC	A
;	LD	(EDCNT0),A
;EC5010
;	LD	A,(FRCNT)
;	AND	$03
;	LD	E,A
;	LD	A,(EDCNT0)
;	ADD	A,E
;	LD	E,A
;	LD	D,$00
;	LD	HL,EBCBGC2
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(BGPFG),A
;	LD	HL,EBCO0C2
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(OBP0FG),A
;	LD	HL,EBCO1C2
;	ADD	HL,DE
;	LD	A,(HL)
;	LD	(OBP1FG),A
;	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDB
	CALL	NAMISE
;
	LD	DE,$98E0
	CALL	NAMIVS
;
	CALL	ENEMYL
;
;;	LD	A,(FRCNT)
;;	AND	$03
;;	JR	NZ,EB3020
;
	LD	A,(EDCNT4)
	INC	A
	LD	(EDCNT4),A
	CP	$05
	JR	C,EB3020
;
	XOR	A
	LD	(EDCNT4),A
;
	LD	A,(EDCNT0)
	INC	A
	CP	$2B
	JR	NZ,EB3010
	XOR	A
EB3010
	LD	(EDCNT0),A
EB3020
	LD	A,(EDCNT0)
	LD	E,A
	LD	D,$00
	LD	HL,EBSCYD
	ADD	HL,DE
	LD	A,(HL)
;;	SUB	$08
	ADD	A,$00
	LD	(EDWRK0),A	;スクロールポイント！
;
	LD	A,(EDMODE)
	RST	00
	DW	EB1000
	DW	EB2000
	DW	EB3000
	DW	EB4000
	DW	EB5000
;-------------------------------------
EB1000
	LD	A,ECHB
	LD	(BLNKFG),A
;
	JP	EDINC
;-------------------------------------
EB2000
	LD	A,EBGB
	LD	(VRFLG),A
;
	LD	HL,IE
	SET	1,(HL)	;部分スクロールセット！
;
	LD	A,$42
	LD	(LYC),A
;
	LD	A,EDAI
	CALL	ENIDSHL	; 浮遊物１ セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$18
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$55
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$08
;
	LD	HL,ENCHPT
	ADD	HL,DE
	LD	(HL),$02	;木
;
	LD	A,EDAI
	CALL	ENIDSHL	; 浮遊物2 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$68
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$58
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$08
;
	LD	HL,ENCHPT
	ADD	HL,DE
	INC	(HL)  ;,$01	;たる
;
	LD	A,EDAI
	CALL	ENIDSHL	; 浮遊物3 セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$88
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$60
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$08
;
	LD	A,EDAI
	CALL	ENIDSHL	; かもめ セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$08
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$09
;
	LD	HL,ENXSPD
	ADD	HL,DE
	LD	(HL),$08
;
	LD	HL,ENYSPD
	ADD	HL,DE
	LD	(HL),$F8
;
	CALL	ERCLER
;
	LD	A,$50
	LD	(EDTIM3),A
	JP	EDINC
;-------------------------------------
EBSCYD	;リンク揺れ SCCV
;;    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$00,$00,$00,$01,$01,$01,$02,$02,$03,$03,$04,$05,$06,$07,$08
;;   10   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $09,$0A,$0A,$0B,$0B,$0C,$0C,$0C,$0B,$0B,$0A,$0A,$09,$08,$07,$06
;;   20   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $05,$04,$03,$03,$02,$02,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00
;-------------------------------------
EBNAMID
	DB	$0D
 DB $4C,$4D,$4E,$4F,$4C,$4D,$4E,$4F,$4C,$4D,$4E,$4F,$4C,$4D,$00
	DB	$0D
 DB $5C,$5D,$5E,$5F,$5C,$5D,$5E,$5F,$5C,$5D,$5E,$5F,$5C,$5D,$00
	DB	$0D
 DB $6C,$6D,$6E,$6F,$6C,$6D,$6E,$6F,$6C,$6D,$6E,$6F,$6C,$6D,$00
	DB	$0D
 DB $7C,$7D,$7E,$7F,$7C,$7D,$7E,$7F,$7C,$7D,$7E,$7F,$7C,$7D,$00
;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
EB3000
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EB3008	;波書き換え！
;
	LD	HL,VRAMD+1
	LD	A,$9A
	LD	(HLI),A
	LD	A,$23
	LD	(HLI),A
;
	LD	A,(EDCNT1)
	INC	A
	AND	$03
	LD	(EDCNT1),A
	RLA
	RLA
	RLA
	RLA
	AND	$F0
	LD	E,A
	LD	D,$00	
	LD	HL,EBNAMID
	ADD	HL,DE
;
	LD	DE,VRAMD+3
	LD	C,$10
EB3002
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
	DEC	C
	JR	NZ,EB3002
;
	JR	EB300C
EB3008
	CALL	ELINKKAO	;顔 転送！
EB300C
	LD	A,(EDWRK1)
	RST	00
	DW	EB31000
	DW	EB32000
	DW	EB33000
;-----------------------------------------
EB31000
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,EB31010
;
;;	CALL	EDW1INC
EDW1INC
	LD	HL,EDWRK1
	INC	(HL)
EB31010
	RET
;-----------------------------------------
EBKAOPT
 DB $01,$00,$01,$02,$01,$02,$03,$04,$05,$06,$07,$08
EBKAOTM
 DB $20,$18,$20,$18,$18,$18,$20,$40,$0C,$0C,$0C,$40
;-----------------------------------------
EB32000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EB32030
;
	LD	A,(EDCNT3)
	LD	E,A
	LD	D,$00
	LD	HL,EBKAOPT
	ADD	HL,DE
	LD	A,(HL)
	LD	(EDWRK2),A
	LD	HL,EBKAOTM
	ADD	HL,DE
	LD	A,(HL)
	LD	(EDTIM0),A
;
	LD	A,E
	INC	A
	LD	(EDCNT3),A
	CP	$0C
	JR	NZ,EB32030
;
	JP	EDW1INC
EB32030		
	RET
;-----------------------------------------
EB33000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EB33030
;
;	LD	A,(KEYA2)
;	AND	%00100000
;	JR	Z,EB33010
;
;;;	CALL	ERCLER
	XOR	A
	LD	(EDWRK5),A
;
	CALL	EDINC
	RET	
;
EB33010
;	LD	A,(KEYA2)
;	AND	%00010000
;	JR	Z,EB33030
;;
;	XOR	A
;	LD	(EDWRK2),A
;	LD	(EDCNT3),A
;	LD	(EDTIM0),A
;;
;	LD	HL,EDWRK1
;	DEC	(HL)
;	DEC	(HL)
;;
;	LD	A,$20
;	LD	(EDTIM3),A
EB33030
	RET
;=========================================
;-------------------------------------
EBBGC
;3
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011110
;	DB	%00011010
;	DB	%00011010
;	DB	%00011001
;	DB	%00011001
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000101
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
;	DB	%00000000
EBO0C
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011010
	DB	%00011010
	DB	%00011001
	DB	%00011001
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000101
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
EBO1C 
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%10010010
	DB	%01010001
	DB	%01010001
	DB	%01000001
	DB	%01000001
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
;- - - - - - - - - - - - - - - - -
EB4000
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EB4010
;
	LD	A,(EDWRK5)
	CP	$0C
	JR	NZ,EB4008
;
	LD	A,$C0
	LD	(EDTIM0),A
;
	XOR	A
	LD	(BGPFG),A
	LD	(OBP0FG),A
	LD	(OBP1FG),A
;
	JP	EDINC
EB4008
	INC	A
	LD	(EDWRK5),A
EB4010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDWRK5)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EBBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EBO0C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EBO1C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET	
;=========================================
EB5000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EB5020
;
ENDDST
ENDNXT
	XOR	A
	LD	(EDMODE),A
	LD	(ENMODE+$07),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$08),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$09),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0A),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0B),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0C),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0D),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0E),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(ENMODE+$0F),A	;ＬＩＮＫ ＣＬＥＡＲ
	LD	(SCCV),A
	LD	(EDCNT4),A
	LD	(EDCNT5),A
;
	CALL	ERCLER
;
	LD	HL,IE
	RES	1,(HL)	;部分スクロール リセット！
;
	LD	HL,LCDCB
	SET	2,(HL)	; OBJ 8x16 mode
;
	LD	HL,ITMODE
	INC	(HL)	;エンディング D へ
	LD	A,(HL)
	CP	ENDFS+1
	JR	NZ,EB5020
;
	LD	(HL),$00
EB5020
	RET
;=========================================
EKAODT
;00
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$B6,$B7,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$C6,$C7,$C8,$C9
EKAODT1
;01
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$8A,$8B,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$9A,$9B,$C8,$C9
EKAODT2
;02
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$8C,$8D,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$9C,$C7,$C8,$C9
EKAODT3
;03
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$8E,$8F,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$9E,$C7,$C8,$C9
EKAODT4
;04
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$E9,$EA,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$F9,$C7,$C8,$C9
EKAODT5
;05
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$EB,$EC,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$FB,$C7,$C8,$C9
EKAODT6
;06
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$AC,$AC,$86,$87,$88,$89
	DB	$99,$86,$05
	DB	$94,$95,$96,$97,$98,$99
	DB	$99,$A6,$05
	DB	$A4,$A5,$A6,$A7,$A8,$A9
	DB	$99,$C6,$05
	DB	$B4,$B5,$ED,$EE,$B8,$B9
	DB	$99,$E6,$05
	DB	$C4,$C5,$FB,$C7,$C8,$C9
EKAODT7
;07
	DB	$99,$46,$05
	DB	$AC,$AC,$AC,$AC,$AC,$AC
	DB	$99,$66,$05
	DB	$00,$01,$02,$03,$04,$AC
	DB	$99,$86,$05
	DB	$10,$11,$12,$13,$14,$15
	DB	$99,$A6,$05
	DB	$20,$21,$22,$23,$24,$25
	DB	$99,$C6,$05
	DB	$30,$31,$32,$33,$34,$35
	DB	$99,$E6,$05
	DB	$40,$41,$42,$43,$44,$C9
EKAODT8
;08
	DB	$99,$46,$05
	DB	$0C,$0D,$1C,$1D,$AC,$AC
	DB	$99,$66,$05
	DB	$06,$07,$08,$09,$0A,$AC
	DB	$99,$86,$05
	DB	$16,$17,$18,$19,$1A,$1B
	DB	$99,$A6,$05
	DB	$26,$27,$28,$29,$2A,$2B
	DB	$99,$C6,$05
	DB	$36,$37,$38,$39,$3A,$3B
	DB	$99,$E6,$05
	DB	$46,$47,$48,$49,$4A,$C9
;
EKAOAD
	DW	EKAODT
	DW	EKAODT1
	DW	EKAODT2
	DW	EKAODT3
	DW	EKAODT4
	DW	EKAODT5
	DW	EKAODT6
	DW	EKAODT7
	DW	EKAODT8
;- - - - - - - - - - - - - - - - - - -
ELINKKAO
	LD	A,(FRCNT)
	AND	$01
	CP	$01
	JR	NZ,ELK020
;
	LD	A,(EDWRK2)	;顔パターン
	SLA	A
	LD	E,A
	LD	D,$00
	LD	HL,EKAOAD
	ADD	HL,DE
	LD	A,(HLI)
	LD	H,(HL)
	LD	L,A
;
	LD	DE,VRAMD+1
	LD	C,54 
ELK002
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
	DEC	C
	JR	NZ,ELK002
;
	XOR	A
	LD	(DE),A
ELK020
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	D				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDD
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	ED1000
	DW	ED2000
	DW	ED3000
	DW	ED4000
	DW	ED5000
	DW	ED6000
	DW	ED7000
	DW	ED8000
	DW	ED9000
;-------------------------------------
ED1000
	LD	A,ECHD
	LD	(BLNKFG),A
;
	JP	EDINC
;-------------------------------------
ED2000
	LD	A,EBGD
	LD	(VRFLG),A
;
	LD	A,EDAI	;リンクセット
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$40
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$4E
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0A
	JP	EDINC
;-------------------------------------
ED3000
	LD	DE,$9960
	CALL	NAMIVS
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,ED3010
;
	LD	A,(EDCNT0)
	CP	$0C
	JR	NZ,ED3008
;
	CALL	ERCLER
;
	LD	A,$60
	LD	(EDTIM3),A
	JP	EDINC
ED3008
	INC	A
	LD	(EDCNT0),A
ED3010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EB23BGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	(OBP0FG),A
	LD	HL,EB23O0C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EB23O1C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET
;-------------------------------------
ED4000
	LD	DE,$9960
	CALL	NAMIVS
;
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,ED4010
;
	CALL	ERCLER
;
	JP	EDINC
ED4010
	RET
;-------------------------------------
ED5O0P
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00101110
	DB	%00101110
	DB	%00101110
	DB	%00101110
	DB	%01101110
	DB	%01101110
	DB	%01101110
	DB	%01101110
;- - - - - - - - - - - - - - -
ED5000
	LD	DE,$9960
	CALL	NAMIVS
;
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,ED5010
;
	LD	A,(EDCNT0)
	CP	$08
	JR	NZ,ED5008
;
	CALL	ERCLER
;
	LD	A,$20
	LD	(EDTIM0),A
;
	JP	EDINC
ED5008
	INC	A
	LD	(EDCNT0),A
ED5010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,ED5O0P
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	RET
;-----------------------------------
ED6000
	LD	DE,$9960
	CALL	NAMIVS
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,ED6010
;
	LD	A,$0A
	LD	(EDTIM0),A
;
	LD	A,(EDWRK0)	;顔上げ！
	INC	A
	LD	(EDWRK0),A
	CP	$02
	JR	NZ,ED6010
;
	LD	A,$20
	LD	(EDTIM0),A
;
	JP	EDINC
ED6010
	RET	
;-----------------------------------
ED7000
	LD	DE,$9960
	CALL	NAMIVS
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,ED7008
;
;;;	CALL	ERCLER
	JP	EDINC
;
ED7008
;	LD	A,(KEYA2)
;	AND	$30
;	JR	Z,ED7010
;;
;	LD	A,$20
;	LD	(EDTIM3),A
;;
;	XOR	A
;	LD	(EDWRK0),A
;;
;	LD	HL,EDMODE
;	LD	(HL),$03
ED7010
	RET	
;-----------------------------------
ED8DATA
	DB	$9B,$E0,$13
;0    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC

 DB  00;Dammy
	DB	$9B,$C0,$13
;1    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$A0,$13
;2    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$80,$13
;3    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $60,$61,$62,$63,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$60,$13
;4    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $50,$51,$52,$53,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$40,$13
;5    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$20,$13
;6    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$00,$13
;7    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$E0,$13
;8    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$60,$61,$62,$63,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$C0,$13
;9    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$50,$51,$52,$53,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$A0,$13
;A    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$80,$13
;B    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$60,$13
;C    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$60,$61
 DB  00;Dammy
	DB	$9A,$40,$13
;D    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$50,$51
 DB  00;Dammy
	DB	$9A,$20,$13
;E    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$00,$13
;F    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $6B,$6C,$6D,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$E0,$13
;10   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $5B,$5C,$5D,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$68,$69,$6A,$6B,$6C,$6D,$AC,$AC
 DB  00;Dammy
	DB	$99,$C0,$13
;11   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$58,$59,$5A,$5B,$5C,$5D,$AC,$AC
 DB  00;Dammy
	DB	$99,$A0,$13
;12   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$80,$13
;13   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$60,$13
;14   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$68,$69
 DB  00;Dammy
	DB	$99,$40,$13
;15   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$68,$69,$6A,$6B,$6C,$6D,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$58,$59
 DB  00;Dammy
	DB	$99,$20,$13
;16   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$58,$59,$5A,$5B,$5C,$5D,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$00,$13
;17   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$E0,$13
;18   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$C0,$13
;19   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$A0,$13
;1A   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$80,$13
;1B   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$60,$13
;1C   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$40,$13
;1D   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$20,$13
;1E   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$40,$41,$42,$43
 DB  00;Dammy
	DB	$98,$00,$13
;1F   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$1B,$2E,$2E,$2E
 DB  00;Dammy
	DB	$9B,$E0,$13
;20   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $41,$42,$43,$54,$55,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$9C,$9E,$BE,$E9
 DB  00;Dammy
	DB	$9B,$C0,$13
;21   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $2E,$2E,$2E,$2E,$2F,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$A0,$13
;22   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $9E,$BE,$E9,$F9,$FB,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$80,$13
;23   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
;#############################################################
	DB	$9B,$60,$13
;24   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$40,$13
;25   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $43,$54,$55,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$20,$13
;26   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $2E,$2E,$2F,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$00,$13
;27   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $E9,$F9,$FB,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$E0,$13
;28   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$C0,$13
;29   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$A0,$13
;2A   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$80,$13
;2B   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$40,$41,$42,$43,$54,$55,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$60,$13
;2C   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$1B,$2E,$2E,$2E,$2E,$2F,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$40,$13
;2D   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$9C,$9E,$BE,$E9,$F9,$FB,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$20,$13
;2E   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9A,$00,$13
;2F   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$E0,$13
;30   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$C0,$13
;31   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$A0,$13
;32   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$80,$13
;33   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$40,$41,$42,$43
 DB  00;Dammy
	DB	$99,$60,$13
;34   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$1B,$2E,$2E,$2E
 DB  00;Dammy
	DB	$99,$40,$13
;35   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $40,$41,$42,$43,$54,$55,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$9C,$9E,$BE,$E9
 DB  00;Dammy
	DB	$99,$20,$13
;36   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $1B,$2E,$2E,$2E,$2E,$2F,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$00,$13
;37   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $9C,$9E,$BE,$E9,$F9,$FB,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$E0,$13
;38   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$C0,$13
;39   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
;#########################################################
	DB	$98,$A0,$13
;3A   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$80,$13
;3B   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$60,$13
;3C   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$40,$13
;3D   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$20,$13
;3E   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$98,$00,$13
;3F   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$E0,$13
;40   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$C0,$13
;41   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$A0,$13
;42   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$80,$13
;43   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$60,$13
;44   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $3C,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$40,$13
;45   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $2C,$2D,$AC,$AC,$AC,$AC,$AC,$AC,$78,$79,$3C,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$9B,$20,$13
;46   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$3D,$3F,$AC,$AC,$AC,$AC,$45,$AE,$2C,$2D,$AC,$AC,$AC,$7B,$3D,$3F,$78,$79
 DB  00;Dammy
	DB	$9B,$00,$13
;47   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$3E,$AC,$AC,$AC,$AC,$72,$AE,$AE,$75,$AC,$AC,$7A,$4B,$AE,$3E,$45,$AE
 DB  00;Dammy
	DB	$9A,$E0,$13
;48   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$3D,$3F,$AC,$AC,$56,$73,$74,$67,$AC,$AC,$72,$AE,$AE,$AE,$AE,$AE
 DB  00;Dammy
	DB	$9A,$C0,$13
;49   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$AE,$3E,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$56,$73,$AE,$AE,$AE,$AE
 DB  00;Dammy
	DB	$9A,$A0,$13
;4A   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$AE,$75,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$70,$71,$AE,$AE
 DB  00;Dammy
	DB	$9A,$80,$13
;4B   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$74,$67,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$57,$AE,$AE
 DB  00;Dammy
	DB	$9A,$60,$13
;4C   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $72,$AE,$76,$77,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$7B,$AE,$AE
 DB  00;Dammy
	DB	$9A,$40,$13
;4D   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $56,$73,$66,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$7A,$4B,$AE,$AE
 DB  00;Dammy
	DB	$9A,$20,$13
;4E   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$7B,$3D,$3F,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$72,$AE,$AE,$AE
 DB  00;Dammy
	DB	$9A,$00,$13
;4F   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$7A,$4B,$AE,$3E,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$56,$73,$AE,$AE
 DB  00;Dammy
	DB	$99,$E0,$13
;50   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$72,$AE,$AE,$75,$AC,$AC,$FE,$FF,$05,$0B,$AC,$AC,$AC,$AC,$AC,$AC,$70,$71
 DB  00;Dammy
	DB	$99,$C0,$13
;51   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$56,$73,$74,$67,$AC,$AC,$F8,$FA,$FC,$FD,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$57
 DB  00;Dammy
	DB	$99,$A0,$13
;52   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$A2,$A3,$BF,$F0,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$80,$13
;53   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$84,$85,$9D,$9F,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$60,$13
;54   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$40,$13
;55   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC
 DB  00;Dammy
	DB	$99,$20,$13
;56   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $3C,$AC,$78,$79,$3C,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$7B,$3D,$3F,$AC,$AC
 DB  00;Dammy
	DB	$99,$00,$13
;57   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $2C,$2D,$45,$AE,$2C,$2D,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$AC,$7A,$4B,$AE,$3E,$AC,$AC
 DB  00;Dammy
	DB	$98,$E0,$13
;58   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$AE,$75,$AC,$AC,$AC,$AC,$AC,$AC,$78,$79,$AE,$AE,$AE,$AE,$3C,$AC
 DB  00;Dammy
	DB	$98,$C0,$13
;59   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F  10  11  12  13
 DB $AE,$AE,$AE,$AE,$74,$67,$AC,$AC,$AC,$AC,$AC,$AC,$45,$AE,$AE,$AE,$AE,$AE,$2C,$2D
 DB  00;Dammy
;--------------------------------------------------------------------
ED8SPD
;0    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $02,$04,$06,$08,$0A,$0C,$0E,$10,$12,$14,$16,$18,$1A,$1C,$1E,$20
;1    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $22,$24,$26,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28
;2    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28,$28
;3    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $28,$28,$28,$27,$26,$25,$24,$23,$22,$21,$20,$1F,$1E,$1D,$1C,$1B
;4    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $1A,$19,$18,$17,$16,$15,$14,$13,$12,$11,$10,$0F,$0E,$0D,$0C,$0B
;5    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $0A,$09,$08,$07,$06,$05,$04,$04,$04,$04,$04,$04,$00,$00,$00,$00
;--------------------------------------------------------------------
ED8CLD
;0    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
;1    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01
;2    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $02,$02,$02,$02,$02,$02,$02,$02,$02,$02,$03,$03,$03,$03,$03,$03
;3    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $03,$03,$03,$03,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
;4    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
;5    0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04,$04
;--------------------------------------------------------------------
ED8BGP
;0
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
;4
	DB	%00011111
	DB	%00011111
	DB	%00011111
	DB	%00011111
;8
	DB	%00011010
	DB	%00011010
	DB	%00011010
	DB	%00011010
;C
	DB	%00010101
	DB	%00010101
	DB	%00010101
	DB	%00010101
;10
	DB	%00010000
	DB	%00010000
	DB	%00010000
	DB	%00010000
;14
	DB	%00010000
	DB	%00010000
	DB	%00010000
	DB	%00010000
;18
	DB	%00010000
	DB	%00010000
	DB	%00010000
	DB	%00010000
;1C
	DB	%00010101
	DB	%00010101
	DB	%00010101
	DB	%00010101
;20
	DB	%00011001
	DB	%00011001
	DB	%00011010
	DB	%00011010
;24
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
;--------------------------------------------------------------------
ED8000
	LD	A,(EDCNT3)
	CP	$0E
	JR	NC,ED8005
;
	LD	DE,$9960
	CALL	NAMIVS
ED8005
	LD	A,(EDCNT3)
	LD	E,A
	LD	D,$00
	LD	HL,ED8CLD
	ADD	HL,DE
	LD	A,(HL)
	LD	(EDCNT2),A	;ぬきカラーダウン！
;
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT2)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,ED8BGP
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;
	LD	A,(EDCNT3)
	LD	E,A
	LD	D,$00
;
	CP	$59
	JR	NZ,ED8010
;
	LD	A,(SCCV)
	CP	$30
	JR	NZ,ED8010
;
	LD	A,$FF
	LD	(EDTIM2),A
;
	LD	A,$A8
	LD	(EDTIM3),A
;
	JP	EDINC
;
ED8010
	LD	HL,ED8SPD
	ADD	HL,DE
	LD	A,(HL)
	CPL
	INC	A
	SLA	A
	LD	(ENXSPD),A
;
	LD	BC,$00
	LD	A,(ENXPSL)
	PUSH	AF
	CALL	EDXCLC
;
	LD	A,(ENXPSL)
	LD	(SCCV),A
	AND	$F8
	LD	E,A
	POP	AF
	AND	$F8
	CP	E
	JR	Z,ED8090
;
	LD	A,(EDCNT3)
	CP	$59
	JR	Z,ED8090
	INC	A
	LD	(EDCNT3),A
;
	CP	$44
	JR	NZ,ED8020
;
	LD	A,%11100011
	LD	(OBP1FG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;くじらセット
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$80
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0B
;
	LD	HL,ENTIM0
	ADD	HL,DE
KUJTM
	LD	(HL),$A8
ED8020
;	LD	A,(KEYA2)
;	AND	%00110000
;	JR	Z,ED80010
;;
;	LD	HL,EDCNT3
;	INC	(HL)
;;
;	LD	A,(SCCV)
;	SUB	$08
;	LD	(SCCV),A
;
ED80010
	LD	A,(EDCNT3)
	LD	E,A
	LD	D,$00
	SLA	E
	RL	D
	SLA	E
	RL	D
	SLA	E
	RL	D
	LD	A,E
	LD	L,D
;
	SLA	E
	RL	D
	ADD	A,E	; x $18
	LD	E,A
;
	LD	A,D
	ADC	A,$00
	ADD	A,L
	LD	D,A
;
	LD	HL,ED8DATA
	ADD	HL,DE
;
	LD	DE,VRAMD+1
;
	LD	C,$18	
ED8070
	LD	A,(HLI)
	LD	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,ED8070
ED8090
	RET
;------------------------------------------------------
ED9000
	LD	A,(EDTIM3)
	AND	A
	JR	NZ,ED9010
;
	XOR	A
	LD	(BGPFG),A
;
	JP	ENDNXT	
ED9010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT2)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,ED8BGP
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;
;	LD	A,(KEYA2)
;	AND	$30
;	JR	Z,ED9020
;;
;	XOR	A
;	LD	(ENXPSL),A
;	LD	(ENXSPD),A
;	LD	(ENXSDR),A
;	LD	(ENMODE+$0A),A
;	LD	(ENMODE+$0B),A
;	LD	(ENMODE+$0C),A
;	LD	(ENMODE+$0D),A
;	LD	(ENMODE+$0E),A
;	LD	(ENMODE+$0F),A
;;
;	CALL	ENDDST
;;
;	LD	HL,ITMODE
;	LD	(HL),ENDDS
;ED9020
;	LD	A,(ENYPSL+$0F)
;	CP	$4C
;	JR	NC,ED9030
	LD	A,(EDTIM2)
	AND	A
	JR	NZ,ED9030
;
	LD	A,(EDCNT1)
	INC	A
	LD	(EDCNT1),A
;;	LD	A,(FRCNT)
	AND	$07
;;	AND	$1F
	JR	NZ,ED9030
;
	LD	A,(EDCNT2)
	CP	$24
;;;	CP	$08
	JR	Z,ED9030
	INC	A
	LD	(EDCNT2),A	;ぬきアップ！
	CP	$05
	JR	NZ,ED9030
;
	LD	A,%00011110
	LD	(OBP0FG),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;光セット！
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$60+2
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$58+2
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0C
;
	LD	HL,ENTIM0
	ADD	HL,DE
	LD	(HL),$60
ED9030
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	E				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDE
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	EE1000
	DW	EE2000
	DW	EE3000
	DW	EE4000
	DW	EE5000
	DW	EE6000
	DW	EE7000
;-------------------------------------
EE1000
	LD	A,ECHE
	LD	(BLNKFG),A
;
	JP	EDINC
;-------------------------------------
EE2000
	LD	A,EBGE
	LD	(VRFLG),A
;
	CALL	ERCLER
	LD	A,%00011110
	LD	(BGPFG),A
	LD	A,%01101110
	LD	(OBP0FG),A
;
	LD	A,EDAI	;リンクセット
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$38
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0D
;
	LD	A,$20
	LD	(EDTIM0),A
	JP	EDINC
;-------------------------------------
EE3000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EE3008
;
	CALL	EDINC
EE3008
;----------------------------------------
EESCST
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,EE3020
;
	LD	A,(EDCNT4)
	INC	A
	CP	$31
	JR	NZ,EE3010
	XOR	A
EE3010
	LD	(EDCNT4),A
EE3020
	LD	A,(EDCNT4)
	LD	E,A
	LD	D,B
	LD	HL,DLINKYD
	ADD	HL,DE
	LD	A,(HL)
	SRA	A
	LD	(SCCV),A
	RET
;--------------------------------------
EEOBCL
	DB	%01101110
	DB	%01101110
	DB	%01101110
	DB	%01101110
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
;
EE4000
	CALL	EESCST
;
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EE4010
;
	LD	A,(EDCNT0)
	INC	A
	LD	(EDCNT0),A
	CP	$04
	JR	NZ,EE4010
;
	LD	A,$FF
	LD	(EDTIM0),A
;
	JP	EDINC
EE4010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDCNT0)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EEOBCL
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A	
	RET
;=====================================
EE5000
	CALL	EESCST
;
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EE5010
;
;	LD	A,(KEYA2)
;	AND	$30
;	JR	Z,EE5008
;;
;	XOR	A
;	LD	(EDMODE),A
;	LD	(ENMODE+$0F),A
;------------------------------------------
ETIM1
	LD	A,$E0
	LD	(EDTIM0),A
;
	JP	EDINC
;	CALL	ENDNXT
EE5008
	RET
EE5010
	CP	$44
	JR	Z,EE5018
	CP	$50
	JR	NZ,EE5020
EE5018
	LD	HL,EDWRK3
	INC	(HL)
EE5020
	RET
;=======================================
EE6000
	CALL	EESCST
;
	LD	HL,EDTIM0
	LD	A,(FRCNT)
	AND	$07
	OR	(HL)
	JR	NZ,EE6010
;
	LD	A,(EDWRK2)
	INC	A
	LD	(EDWRK2),A
	CP	$0C
	JR	NZ,EE6010
;
	LD	A,$40
	LD	(EDTIM0),A
;
	CALL	EDINC
EE6010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDWRK2)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EBBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
	LD	HL,EBO0C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP0FG),A
	LD	HL,EBO1C
	ADD	HL,DE
	LD	A,(HL)
	LD	(OBP1FG),A
	RET	
;=======================================
EE7000
	LD	A,(EDTIM0)
	AND	A
	JR	NZ,EE7010
;
	JP	ENDNXT
EE7010
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	F				          %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;-------------------------------------
ENDF
	LD	DE,$99A0
	CALL	NAMIVS
;
	CALL	STAFFST
;
	CALL	ENEMYL
;
	LD	A,(EDMODE)
	RST	00
	DW	EF0000
	DW	EF1000
	DW	EF2000
	DW	EF3000
	DW	EF4000
	DW	EF5000
;-------------------------------------
EF0000
	LD	A,ECHF
	LD	(BLNKFG),A
;
	LD	HL,LCDCB
	RES	2,(HL)	; OBJ 8x8 mode
;
	JP	EDINC
;-------------------------------------
EF1000
	LD	A,EBGF
	LD	(VRFLG),A
;
	CALL	ERCLER
;
	LD	A,EDAI	;リンクセット
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$78
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0E
;
	XOR	A
;;;	LD	(EDWRK5),A
	LD	(STMODE),A
	DEC	A	;FF
	LD	(STWRK0),A
;
ETIM2
	LD	A,$40+$60+$10
	LD	(EDTIM3),A	;スタッフロール始まり待ち！
;;;;;	LD	(EDTIM1),A	;スタッフロール始まり待ち！
;
	XOR	A
	LD	(FRCNT),A
;;;	LD	(OBP0FG),A
	LD	(OBP1FG),A
	JP	EDINC
;-------------------------------------
EFBGC
EIBGC2
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000000
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00000100
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00011001
	DB	%00011110
	DB	%00011110
	DB	%00011110
	DB	%00011110
;- - - - - - - - - - - - - - -
EF2000
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EF2010
;
	LD	A,(EDWRK2)
	INC	A
	LD	(EDWRK2),A
	CP	$0C
	JR	NZ,EF2010
;
;;	LD	A,$C0
;;	LD	(EDTIM0),A
;
ETIM3
	LD	A,$FF
	LD	(EDTIM4),A
	XOR	A
	LD	(FRCNT),A
;
	CALL	EDINC
EF2010
	LD	A,(FRCNT)
	AND	$03
	LD	E,A
	LD	A,(EDWRK2)
	ADD	A,E
	LD	E,A
	LD	D,$00
	LD	HL,EFBGC
	ADD	HL,DE
	LD	A,(HL)
	LD	(BGPFG),A
;;;;	LD	(OBP1FG),A
	LD	(OBP0FG),A
	RET	
;-------------------------------------
EF3000
	LD	A,(EDTIM4)
	AND	A
	JR	NZ,EF3090
;
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,EF3090
;
	LD	HL,SCCV
	DEC	(HL)
;
;;	LD	A,(EDTIM3)
;;	AND	A
;;	JR	NZ,EF3030
;
	LD	A,(HL)
	CP	$70
	JR	NZ,EF3030
;
;;;	CALL	ERCLER
	JP  	EDINC
EF3030
	CP	$A0
	JR	NZ,EF3050
;
	LD	HL,ENMODE+$0F	;リンク消す！
	LD	(HL),$00
;
	JP  	EFBGRV
EF3050
	CP	$C0
	JR	NZ,EF3090
;
;	LD	HL,LCDCB
;	RES	2,(HL)	; OBJ 8x8 mode
;
	LD	A,EDAI	;鯨せっと!
	CALL	ENIDSHL
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$18
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$B0
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$0F
EF3090
	RET
;-------------------------------------
EF4000	;くじら消え待ち！
;	XOR	A
;;;;	LD	(EDWRK5),A
;	LD	(STMODE),A
;	DEC	A	;FF
;	LD	(STWRK0),A
	RET
;-------------------------------------
EF5000
;;	CALL	STAFFST
	RET
;========================================
EFBGDT
EFB0
	DB	$99,$C1,$05
	DB	$58,$59,$5A,$5B,$5C,$5D
	DB	$99,$E1,$05
	DB	$68,$69,$6A,$6B,$6C,$6D
;
	DB	$99,$F1,$02
	DB	$58,$59,$5A
	DB	$9A,$11,$02
	DB	$68,$69,$6A
;
	DB	$9A,$20,$01
	DB	$5C,$5D
	DB	$00
EFB1
;-----------------------------------------------------
EFBGRV
	LD	HL,EFBGDT
	LD	DE,VRAMD+1
;
	LD	C,EFB1-EFB0	
EFBR10
	LD	A,(HLI)
	LD 	(DE),A
	INC	DE
;
	DEC	C
	JR	NZ,EFBR10
;
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	F くじら  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
FKUJIRACD
;0
	DB	$08,$00,$5C,$00
	DB	$10,$00,$5D,$00
	DB	$00,$08,$C0,$00
	DB	$08,$08,$C1,$00
	DB	$00,$10,$CE,$00
	DB	$08,$10,$CF,$00
	DB	$00,$18,$DE,$00
	DB	$08,$18,$DF,$00
	DB	$00,$20,$EA,$00
	DB	$08,$20,$EB,$00
;1
	DB	$08,$00,$5E,$00
	DB	$10,$00,$5F,$00
	DB	$00,$08,$C0,$00
	DB	$08,$08,$C1,$00
	DB	$00,$10,$CE,$00
	DB	$08,$10,$CF,$00
	DB	$00,$18,$DE,$00
	DB	$08,$18,$DF,$00
	DB	$00,$20,$EA,$00
	DB	$08,$20,$EB,$00
;2
	DB	$08,$00,$EC,$00
	DB	$10,$00,$ED,$00
	DB	$00,$08,$D0,$00
	DB	$08,$08,$D1,$00
	DB	$00,$10,$CE,$00
	DB	$08,$10,$CF,$00
	DB	$00,$18,$DE,$00
	DB	$08,$18,$DF,$00
	DB	$00,$20,$EA,$00
	DB	$08,$20,$EB,$00
;3
	DB	$08,$00,$EE,$00
	DB	$10,$00,$EF,$00
	DB	$00,$08,$D0,$00
	DB	$08,$08,$D1,$00
	DB	$00,$10,$CE,$00
	DB	$08,$10,$CF,$00
	DB	$00,$18,$DE,$00
	DB	$08,$18,$DF,$00
	DB	$00,$20,$EA,$00
	DB	$08,$20,$EB,$00
;- - - - - - - - - - - - - - - - - - - -
FKUJIRA
	LD	A,108-$30
	LD	(ENOMID),A
;
	LD	A,(SCCV)
	LD	E,A
	LD	A,(ENDSYP)
	SUB	E
	LD	(ENDSYP),A
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	RRA
	RRA
	AND	$03
	RLA
	RLA
;
	RLA
	AND	%11111000
	LD	E,A
	RLA
	RLA
	AND	%11100000
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,FKUJIRACD
	ADD	HL,DE
	LD	C,10
	CALL	ENOMST2
;
	LD	A,10
	CALL	NXOMSBL
;
	LD	A,(FRCNT)
	AND	$01
	JR	NZ,FKU100
;
	LD	HL,ENXSPD
	ADD	HL,BC
	LD	(HL),$04
;
	LD	HL,ENYSPD
	ADD	HL,BC
	LD	(HL),$FF
;
	CALL	EDMVCL
;
	LD	A,(ENSVXL)
	CP	$A8
	RET	C
;
	CALL	EDINC
;
;	LD	HL,LCDCB
;	RES	2,(HL)	; OBJ 8x8 mode
;
;	XOR	A
;	LD	(OBP0FG),A
;	LD	(OBP1FG),A
;
	JP	EDCLER
FKU100
	RET
;- - - - - - - - - - - - - - - - - - - -
FMARINCD
;0
	DB	$00,$00,$00,$00
	DB	$08,$00,$01,$00
	DB	$00,$08,$02,$00
	DB	$08,$08,$03,$00
;
	DB	$00,$FA,$10,$00
	DB	$08,$FA,$11,$00
;
	DB	$00,$0E,$10,$20
	DB	$08,$0E,$11,$20
;1
	DB	$00,$00,$00,$00
	DB	$08,$00,$01,$00
	DB	$00,$08,$02,$00
	DB	$08,$08,$03,$00
;
	DB	$08,$FA,$10,$40
	DB	$00,$FA,$11,$40
;
	DB	$08,$0E,$10,$60
	DB	$00,$0E,$11,$60
;2
	DB	$00,$08,$00,$20
	DB	$08,$08,$01,$20
	DB	$00,$00,$02,$20
	DB	$08,$00,$03,$20
;
	DB	$00,$FA,$10,$00
	DB	$08,$FA,$11,$00
;
	DB	$00,$0E,$10,$20
	DB	$08,$0E,$11,$20
;3
	DB	$00,$08,$00,$20
	DB	$08,$08,$01,$20
	DB	$00,$00,$02,$20
	DB	$08,$00,$03,$20
;
	DB	$08,$FA,$10,$40
	DB	$00,$FA,$11,$40
;
	DB	$08,$0E,$10,$60
	DB	$00,$0E,$11,$60
;- - - - - - - - - - - - - - - - - - -
FMARINMV
	LD	HL,DETHCT
	LD	A,(HLI)
	OR	(HL)
	JR	NZ,FMAR100
;;	RET	NZ	;ノーミスクリアー？
;--			;YES !
	LD	A,$1C
	LD	(OBP0FG),A
;
	LD	A,108-$30
	LD	(ENOMID),A
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	AND	$03
	RLA
	RLA
	RLA
	RLA
	RLA
	AND	%11100000
	LD	E,A
	LD	D,B
	LD	HL,FMARINCD
	ADD	HL,DE
	LD	C,08
	CALL	ENOMST2
;
	LD	A,08
	CALL	NXOMSBL
FMAR100
	CALL	EDMVCL
;
	LD	A,(FRCNT)
	AND	$0F
	JR	NZ,FMAR110
;
	LD	HL,ENYSPD
	ADD	HL,BC
	LD	A,(HL)
	CP	$FC
	JR	Z,FMAR110
;
	DEC	(HL)
FMAR110
	LD	A,(ENSVXL)
	CP	$A8
	JP	Z,EDCLER
;
	LD	HL,ENCONT
	ADD	HL,BC
	LD	A,(HL)
	INC	A
	LD	(HL),A
	AND	$7F
	JR	NZ,FMAR120
;
	LD	A,$21
	LD	(SOUND1),A	;(S)
FMAR120
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	F リンク  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
FLINKCD
;0
	DB	$00,$00,$4C,$00
	DB	$08,$00,$4D,$00
	DB	$00,$08,$4E,$00
	DB	$08,$08,$4F,$00
	DB	$10,$F8,$60,$00
	DB	$18,$F8,$61,$00
	DB	$10,$00,$62,$00
	DB	$18,$00,$63,$00
	DB	$10,$08,$64,$00
	DB	$18,$08,$65,$00
	DB	$10,$10,$66,$00
	DB	$18,$10,$67,$00
;1
	DB	$00,$00,$4C,$00
	DB	$08,$00,$4D,$00
	DB	$00,$08,$4E,$00
	DB	$08,$08,$4F,$00
	DB	$10,$F8,$68,$00
	DB	$18,$F8,$69,$00
	DB	$10,$00,$6A,$00
	DB	$18,$00,$6B,$00
	DB	$10,$08,$6C,$00
	DB	$18,$08,$6D,$00
	DB	$10,$10,$6E,$00
	DB	$18,$10,$6F,$00
;2
	DB	$00,$00,$4C,$00
	DB	$08,$00,$4D,$00
	DB	$00,$08,$4E,$00
	DB	$08,$08,$4F,$00
	DB	$10,$F8,$70,$00
	DB	$18,$F8,$71,$00
	DB	$10,$00,$72,$00
	DB	$18,$00,$73,$00
	DB	$10,$08,$74,$00
	DB	$18,$08,$75,$00
	DB	$10,$10,$76,$00
	DB	$18,$10,$77,$00
;3
	DB	$00,$00,$4C,$00
	DB	$08,$00,$4D,$00
	DB	$00,$08,$4E,$00
	DB	$08,$08,$4F,$00
	DB	$10,$F8,$78,$00
	DB	$18,$F8,$79,$00
	DB	$10,$00,$7A,$00
	DB	$18,$00,$7B,$00
	DB	$10,$08,$7C,$00
	DB	$18,$08,$7D,$00
	DB	$10,$10,$7E,$00
	DB	$18,$10,$7F,$00
;--------------------------------------
FLINKMV
	LD	A,108-$30
	LD	(ENOMID),A
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,FLK100
;
	LD	A,(EDCNT4)
	INC	A
	CP	$31
	JR	C,FLK080
	XOR	A
FLK080
	LD	(EDCNT4),A
FLK100
	LD	A,(EDCNT4)
	LD	E,A
	LD	D,B
	LD	HL,DLINKYD
	ADD	HL,DE
;
	LD	A,(SCCV)
	LD	D,A
;
	LD	A,(HL)
	SRA	A
	LD	E,A
	LD	A,(ENDSYP)
	ADD	A,E
	SUB	D
	LD	(ENDSYP),A
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	AND	$03
	RLA
	RLA
;
	RLA
	RLA
	AND	%11110000
	LD	E,A
	RLA
	AND	%11100000
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,FLINKCD
	ADD	HL,DE
	LD	C,12 
	CALL	ENOMST2
;
	LD	A,12 
	CALL	NXOMSBL
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	E リンク  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ELINKCD
;0
	DB	$00,$00,$00,$00
	DB	$00,$08,$02,$00
	DB	$00,$10,$04,$00
	DB	$00,$18,$06,$00
	DB	$00,$20,$08,$00
	DB	$00,$28,$0A,$00
;
;	DB	$10,$00,$0C,$00
;	DB	$10,$08,$0E,$00
;	DB	$10,$10,$10,$00
;	DB	$10,$18,$12,$00
	DB	$10,$20,$14,$00
	DB	$10,$28,$16,$00
;
;	DB	$20,$08,$18,$00
;	DB	$20,$10,$1A,$00
;	DB	$20,$18,$1C,$00
	DB	$20,$20,$1E,$00
	DB	$20,$28,$20,$00
;
	DB	$30,$00,$50,$00
	DB	$30,$08,$22,$00
	DB	$30,$10,$24,$00
	DB	$30,$18,$26,$00
	DB	$30,$20,$28,$00
	DB	$30,$28,$2A,$00
	DB	$30,$30,$2C,$00
	DB	$30,$38,$2E,$00
;
	DB	$40,$00,$30,$00
	DB	$40,$08,$32,$00
	DB	$40,$10,$34,$00
	DB	$40,$18,$36,$00
	DB	$40,$20,$38,$00
	DB	$40,$28,$3A,$00
	DB	$40,$30,$3C,$00
	DB	$40,$38,$3E,$00
	DB	$40,$40,$40,$00
ELKAOCD
;0
	DB	$10,$00,$0C,$00
	DB	$10,$08,$0E,$00
	DB	$10,$10,$10,$00
	DB	$10,$18,$12,$00
	DB	$20,$08,$18,$00
	DB	$20,$10,$1A,$00
	DB	$20,$18,$1C,$00
	DB	$FF,$FF,$FF,$FF
;1
	DB	$10,$00,$0C,$00
	DB	$10,$08,$42,$00
	DB	$10,$10,$44,$00
	DB	$10,$18,$46,$00
	DB	$20,$08,$18,$00
	DB	$20,$10,$48,$00
	DB	$20,$18,$4A,$00
	DB	$FF,$FF,$FF,$FF
;2
	DB	$10,$00,$0C,$00
	DB	$10,$08,$52,$00
	DB	$10,$10,$54,$00
	DB	$10,$18,$56,$00
	DB	$20,$08,$18,$00
	DB	$20,$10,$58,$00
	DB	$20,$18,$5A,$00
	DB	$FF,$FF,$FF,$FF
;----------------------------------------
ELINKMV
	LD	A,(EDCNT4)
	LD	E,A
	LD	D,B
	LD	HL,DLINKYD
	ADD	HL,DE
	LD	A,(HL)
	SRA	A
	LD	E,A
	LD	A,(ENDSYP)
	ADD	A,E
	LD	(ENDSYP),A
;
	LD	HL,ELINKCD
	LD	C,27
	CALL	ENOMST2
;
	LD	A,27
	CALL	NXOMSBL
;
	LD	A,(EDWRK3)
	RLA
	RLA
	RLA
	RLA
	RLA
	AND	%11100000
	LD	E,A
	LD	D,B
	LD	HL,ELKAOCD
	ADD	HL,DE
	LD	C,$07
;
	LD	A,$70-$30
	LD	(ENOMID),A
;
	CALL	ENOMST
;
	LD	A,$7
	CALL	NXOMSBL
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	D ひかり  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
DHIKARICD
	DB	$00,$00,$70,$00
	DB	$00,$00,$70,$00
	DB	$00,$00,$70,$00
;
	DB	$00,$00,$70,$00
	DB	$08,$08,$5C,$00
	DB	$08,$08,$5C,$00
;
	DB	$00,$00,$70,$00
	DB	$08,$08,$5E,$00
	DB	$08,$10,$60,$00
;- - - - - - - - - - - - - - - - - -
DHIKARI
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000011
;
	LD	A,(ENCHPT2)
	RLA
	RLA
	AND	%11111100
	LD	E,A
	RLA
	AND	%11111000
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,DHIKARICD
	ADD	HL,DE
	LD	C,$03
	CALL	ENOMST
;
	CALL	LDTIM0
	CP	$01
	JR	Z,DHKAR08
	CP	$30
	JR	NZ,DHKAR10
DHKAR08
	LD	HL,ENCHPT
	ADD	HL,BC
	INC	(HL)
DHKAR10
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	D くじら  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
DKUJIRACD
	DB	$00,$00,$62,$10
	DB	$00,$08,$62,$30
;
	DB	$10,$F0,$64,$10
	DB	$10,$F8,$66,$10
	DB	$10,$00,$68,$10
	DB	$10,$08,$68,$30
	DB	$10,$10,$66,$30
	DB	$10,$18,$64,$30
;
	DB	$20,$00,$6A,$10
	DB	$20,$08,$6A,$30
;
	DB	$30,$F8,$6C,$10
	DB	$30,$00,$6E,$10
	DB	$30,$08,$6E,$30
	DB	$30,$10,$6C,$30
;- - - - - - - - - - - - - - - - - - - - - - -
DKUJIRA
	XOR	A
	LD	(ENOMID),A
;
	LD	HL,SCCV
	LD	A,(ENDSYP)
	SUB	(HL)
	LD	(ENDSYP),A
;
	LD	HL,DKUJIRACD
	LD	C,$0E
	CALL	ENOMST
;
	LD	A,$0E
	CALL	NXOMSBL
;
	LD	HL,ENYSPD
	ADD	HL,BC
	LD	(HL),$FE
;
	CALL	EDYCLC
;
	LD	A,(ENSTAT2)
	CP	$02
	JR	NC,DKUJ090
;
	CALL	LDTIM0
	JR	NZ,DKUJ090
;
	LD	(HL),$C0 ;$A8
;
	CALL	STATINC
;
	LD	A,$17
	LD	(SOUND2),A	;(S)
DKUJ090
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	D リンク  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
DLINKCD
;0
	DB	$00,$08,$B2,$00	
	DB	$00,$10,$B4,$00	
	DB	$00,$18,$B6,$00	
	DB	$00,$20,$B8,$00	
;
	DB	$10,$10,$BA,$00	
	DB	$10,$18,$BC,$00	
	DB	$10,$20,$86,$00	
;
	DB	$20,$00,$88,$00
	DB	$20,$08,$8A,$00
	DB	$20,$10,$8C,$00
	DB	$20,$18,$8E,$00
	DB	$20,$20,$94,$00
;
	DB	$30,$00,$98,$00
	DB	$30,$08,$9A,$00
	DB	$30,$10,$A4,$00
	DB	$30,$18,$A8,$00
	DB	$30,$20,$AA,$00
;1
	DB	$00,$08,$C2,$00	
	DB	$00,$10,$C4,$00	
	DB	$00,$18,$C6,$00	
	DB	$00,$20,$C8,$00	
;
	DB	$10,$10,$CA,$00	
	DB	$10,$18,$CC,$00	
	DB	$10,$20,$96,$00	
;
	DB	$20,$00,$88,$00
	DB	$20,$08,$8A,$00
	DB	$20,$10,$8C,$00
	DB	$20,$18,$8E,$00
	DB	$20,$20,$94,$00
;
	DB	$30,$00,$98,$00
	DB	$30,$08,$9A,$00
	DB	$30,$10,$A4,$00
	DB	$30,$18,$A8,$00
	DB	$30,$20,$AA,$00
;2
	DB	$00,$08,$D2,$00	
	DB	$00,$10,$D4,$00	
	DB	$00,$18,$D6,$00	
	DB	$00,$20,$D8,$00	
;
	DB	$10,$10,$DA,$00	
	DB	$10,$18,$DC,$00	
	DB	$10,$20,$A6,$00	
;
	DB	$20,$00,$88,$00
	DB	$20,$08,$8A,$00
	DB	$20,$10,$8C,$00
	DB	$20,$18,$8E,$00
	DB	$20,$20,$94,$00
;
	DB	$30,$00,$98,$00
	DB	$30,$08,$9A,$00
	DB	$30,$10,$A4,$00
	DB	$30,$18,$A8,$00
	DB	$30,$20,$AA,$00
;----------------------------------------
DLINKYD
  DB	$00,$00,$00,$00,$00,$00,$01,$01,$01,$01
  DB	$02,$02,$02,$03,$03,$04,$05,$05,$06,$06
  DB    $06,$07,$07,$07,$07,$08,$08,$08,$08,$08
  DB    $08,$07,$07,$07,$07,$06,$06,$06,$05,$05
  DB    $04,$03,$02,$02,$02,$01,$01,$01,$01
; - - - - - - - - - - - - - - - - - - - - -
DLINKMV
	LD	A,$00
	LD	(ENOMID),A
;
	LD	A,(SCCV)
	LD	D,A
	SRA	A
	ADD	A,D
;;;	SLA	A
	LD	(WORK0),A
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,DLNK10
;
	LD	A,(EDCNT4)
	INC	A
	CP	$31
	JR	C,DLNK08
	XOR	A
DLNK08
	LD	(EDCNT4),A
DLNK10
;	LD	A,(FRCNT)
;	RRA
;	RRA
;;;	RRA
;	NOP
;	AND	$1F
	LD	A,(EDCNT4)
	LD	E,A
	LD	D,B
	LD	HL,DLINKYD
	ADD	HL,DE
	LD	A,(ENDSYP)
	ADD	A,(HL)
	LD	HL,WORK0 ;SCCV
	SUB	(HL)
	LD	(ENDSYP),A
	CP	$A8
	JP	NC,EDCLER
;
	LD	A,(EDWRK0)
	RLA
	RLA
;
	AND	%11111100
	LD	E,A
	RLA
	RLA
	RLA
	RLA
	AND	%11000000
	ADD	A,E
	LD	E,A
	LD	D,B
	LD	HL,DLINKCD
	ADD	HL,DE
	LD	C,$11
	CALL	ENOMST
;
	LD	A,$11
	CALL	NXOMSBL
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	太陽光  		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
HIKARICD
	DB	$00,$00,$70,$00
	DB	$08,$08,$5E,$00
	DB	$08,$10,$60,$00
;- - - - - - - - - - - - - - - - - -
HIKARIMV
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000011
;
	LD	HL,HIKARICD
	LD	C,$03
	CALL	ENOMST
;
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	C かもめ 		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
CTORICD
	DB	$50,$00 ;0
	DB	$52,$00 ;1
	DB	$54,$00 ;2
	DB	$56,$00 ;3
	DB	$57,$00 ;4
	DB	$5A,$00 ;5
;- - - - - - - - - - - - - -
CTORIMV
	LD	A,(FRCNT)
	AND	$07
	JR	NZ,CTORI08
;
	LD	HL,ENCHPT
	ADD	HL,BC
	LD	A,(HL)
	INC	A
	CP	$06
	JR	NZ,CTORI02
	XOR	A
CTORI02
	LD	(HL),A
CTORI08
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000001
;
	LD	HL,ENXSPD
	ADD	HL,BC
	LD	A,(HL)
	AND	%10000000
	JR	Z,CTORI10
;
	LD	HL,ENFLCL	
	SET	5,(HL)
CTORI10
	LD	DE,CTORICD
	CALL	EN1CST
;
	CALL	EDXCLC
;
	LD	A,(ENSVXL)
	CP	$B0
	JP	NC,EDCLER
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B2 リンク 		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
B2LINKCD
	DB	$00,$08,$0E,$00
	DB	$00,$10,$1E,$00
	DB	$00,$18,$2E,$00
;
	DB	$10,$00,$50,$00
	DB	$10,$08,$52,$00
	DB	$10,$10,$54,$00
	DB	$10,$18,$58,$00
B2LINKCD2
	DB	$00,$08,$0E,$00
	DB	$00,$10,$1E,$00
	DB	$00,$18,$2E,$00
;
	DB	$10,$00,$60,$00
	DB	$10,$08,$62,$00
	DB	$10,$10,$64,$00
	DB	$10,$18,$68,$00
;-----------------------------------------------
B2LINKYD
	DB	$00,$00,$00,$01,$02,$02,$02,$01
B2WOODYD
	DB	$00,$00,$00,$00,$01,$01,$01,$01
;- - - - - - - - - - - - -
B2LINKMV
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000111
;
	LD	A,$00
	LD	(ENOMID),A
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	RRA
;	NOP
;	NOP
	AND	$07
	LD	E,A
	LD	D,B
	LD	HL,B2LINKYD
	ADD	HL,DE
	LD	A,(ENDSYP)
	ADD	A,(HL)
	LD	(ENDSYP),A
;
	LD	HL,B2LINKCD
	LD	A,(FRCNT)
	AND	$10
	JR	Z,B2L010
	LD	HL,B2LINKCD2
B2L010
	LD	C,$07
	CALL	ENOMST
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B2   浮遊物		 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
B2WOODCD
	DB	$5A,$00
	DB	$6A,$00
B2WOODMV
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000001
;
	LD	A,C
	RLA
	AND	%00000110
	LD	E,A
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	RRA
;	NOP
;	NOP
	ADD	A,E ;$04
	AND	$07
	LD	E,A
	LD	D,B
	LD	HL,B2WOODYD
	ADD	HL,DE
	LD	A,(ENDSYP)
	ADD	A,(HL)
	LD	(ENDSYP),A
;
	LD	DE,B2WOODCD
	CALL	EN1CST
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B  浮遊物	 	 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
BWOODCD
	DB	$54,$00,$64,$00	;たる1
	DB	$64,$20,$54,$20 ;    2
	DB	$4E,$00,$7E,$00 ; 木
;- - - - - - - - - - - - - - - - - 
BWOODMV
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000010
;
	LD	A,(ENCHPT2)
	CP	$01
	JR	Z,TARU1MV
	CP	$02
	JR	Z,KI1MV
;
	LD	A,(EDCNT0)
BWODCSB
	LD	E,A
	LD	D,B
	LD	HL,EBSCYD
	ADD	HL,DE
	LD	A,(HL)
	SUB	$04
BWODCSB2
	CPL
	INC	A
	SRA	A
	LD	E,A
	LD	A,(ENDSYP)
	ADD	A,E
	LD	(ENDSYP),A
;
	LD	DE,BWOODCD
	CALL	EN2CST
	RET
;-------------------------------
TARU1MV
	LD	A,(EDCNT0)
	ADD	A,$06
	CP	$2B
	JR	C,TR1M10
	SUB	$2B
TR1M10
	JR	BWODCSB
;---------------------------------
KI1MV
	LD	A,(EDCNT0)
	ADD	A,$18
	CP	$2B
	JR	C,KI1M10
	SUB	$2B
KI1M10
	LD	E,A
	LD	D,$00
	LD	HL,EBSCYD
	ADD	HL,DE
	LD	A,(HL)
	SUB	$04
	SRA	A
	JR	BWODCSB2
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	B  かもめ	 	 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
BTORICD
	DB	$72,$00,$72,$20 ;0
	DB	$74,$00,$74,$20 ;1
	DB	$76,$00,$76,$20 ;2
	DB	$78,$00,$78,$20 ;3
	DB	$7A,$00,$7A,$20 ;4
	DB	$7C,$00,$7C,$20 ;5
;
BTORITM
	DB	$08 ;0
	DB	$06 ;1
	DB	$06 ;2
	DB	$06 ;3
	DB	$06 ;4
	DB	$08 ;5
;
BTORIMV
	LD	HL,ENMOD0
	ADD	HL,BC
	LD	(HL),%11000010
;
	LD	DE,BTORICD
	CALL	EN2CST
;
	CALL	LDTIM0
	JR	NZ,BTOR100
;
	PUSH	HL
;
	LD	HL,ENCHPT
	ADD	HL,BC
	LD	A,(HL)
	INC	A
	CP	$06
	JR	NZ,BTOR080
;
	XOR	A
BTOR080
	LD	(HL),A
;
	LD	E,A
	LD	D,B
	LD	HL,BTORITM
	ADD	HL,DE
	LD	A,(HL)
	POP	HL
	LD	(HL),A
BTOR100
	LD	HL,ENCONT
	ADD	HL,BC
	LD	A,(HL)
	INC	A
	LD	(HL),A
	AND	$1F
	JR	NZ,BTOR110
;
	LD	HL,ENYSPD
	ADD	HL,BC
	LD	A,(HL)
	CP	$FF
	JR	Z,BTOR110
;
	INC	(HL)
BTOR110
	CALL	EDMVCL
;
	LD	A,(ENSVXL)
	CP	$B0
	JP	NC,EDCLER
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	OBJ楽器			 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
EGAKKICD
	DB	$D0,$00,$D2,$00
	DB	$D4,$00,$D6,$00
	DB	$D8,$00,$DA,$00
	DB	$DC,$00,$DE,$00
	DB	$E0,$00,$E2,$00
	DB	$E4,$00,$E6,$00
	DB	$E8,$00,$EA,$00
	DB	$EC,$00,$EE,$00
;- - - - - - - - - - - - - - - - - 
EGAKKIMV
	LD	HL,ENWRK1
	ADD	HL,BC
	LD	A,(HL)
	ADD	A,$50
	LD	(WORK0),A
;
	LD	DE,EGAKKICD
	CALL	ED2CST
;
	CALL	LDTIM3
	RET	Z
;;	JP	Z,EDCLER
;
	CALL	EDMVCL
;
	RET	
;-------------------------------------------------------
ED2CST
	PUSH	BC
;
	PUSH	DE	; Chr data addr push !
;
	LD	A,(WORK0)
	LD	E,A
	LD	D,B ;$0
	LD	HL,OAM
	ADD	HL,DE
	PUSH	HL
	POP	DE
;
	LD	A,(ENDSYP)  ;(HL)
	LD	(DE),A		; Y L
	INC	DE
;
	LD	A,(TILTXD)
	LD	C,A
;
	LD	A,(ENFLCL)
	AND	%00100000
	RRA
	RRA
;
	LD	HL,ENSVXL
	ADD	A,(HL)
	SUB	C
	LD	(DE),A		; X L
	INC	DE
;
	LD	A,(ENCHPT2)  ;HL)
	LD	C,A
	LD	B,$0
	SLA	C
	RL	B
	SLA	C
	RL	B
	POP	HL	; Chrs data addr. !
	ADD	HL,BC
	LD	A,(HLI)
	LD	(DE),A		; C L
	INC	DE
	LD	A,(HLI)
	PUSH	HL
;
	LD	HL,ENFLCL
	XOR	(HL)
	LD	(DE),A		; A L
	INC	DE
;
;- - Right - - - 
	LD	A,(ENDSYP)   ;(HL)
	LD	(DE),A		; Y R
	INC	DE
;
	LD	A,(TILTXD)
	LD	C,A
;
	LD	A,(ENFLCL)
	AND	%00100000
	XOR	%00100000
	RRA
	RRA
;
	LD	HL,ENSVXL
	SUB	C
	ADD	A,(HL)   ;$08  ;10
	LD	(DE),A		; X R
	INC	DE
;
	POP	HL
	LD	A,(HLI)
	LD	(DE),A		; C R
;
	INC	DE
	LD	A,(HL)
	LD	HL,ENFLCL
	XOR	(HL)
	LD	(DE),A		; A R
;
	POP	BC
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%	台			 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
EDAIMV
	LD	HL,ENWRK0
	ADD	HL,BC
	LD	A,(HL)
	RST	00
	DW	EDAIMV2	 ;0
	DW	EHOSIMV ;1
	DW	EFUKUMV ;2
	DW	EGAKKIMV ;3
	DW	B2LINKMV ;4
	DW	B2WOODMV ;5
	DW	CTORIMV ;6
	DW	HIKARIMV ;7
	DW	BWOODMV	;8
	DW	BTORIMV ;9
	DW	DLINKMV ;A
	DW	DKUJIRA	;B
	DW	DHIKARI	;C
	DW	ELINKMV ;D
	DW	FLINKMV ;E
	DW	FKUJIRA ;F
;
	DW	FMARINMV	;10
;-------------------------------------
EDAIMV2
	CALL	EDAICS
;
	LD	A,(ENSTAT2)
	RST	00
	DW	EDAI100
	DW	EDAI200
	DW	EDAI300
	DW	EDAI400
	DW	EDAI500
;=======================================
EDAI100
	LD	A,(ENDSYP)
	CP	$60
	JP	Z,STATINC
;
	LD	HL,ENYSPD
	ADD	HL,BC
	LD	(HL),$08
;
	CALL	EDYCLC
;
	LD	HL,ENYPSL
	ADD	HL,BC
	LD	A,(HL)
	CP	$F0
	JR	NZ,EDAI10
;
	LD	HL,ENWRK1
	ADD	HL,BC
	LD	A,(HL)
	CP	$08
	JR	NC,EDAI10
	INC	A
	LD	(HL),A
;
	LD	HL,ENYPSL
	ADD	HL,BC
	LD	(HL),$E0
EDAI10
	LD	A,$FF
	LD	(PLYSPD),A
;----------------------------------------
EPMVCL
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	AND	$01
	ADD	A,$00
	LD	(PLCHPT),A
;
EPMVCL2
	PUSH	BC
	XOR	A
	LD	(PLXSPD),A
	CALL	MVCALC
	CALL	EPLCST
	POP	BC
	RET
;=======================================
EDAI200
	LD	A,$F8
	LD	(PLYSPD),A
;
	CALL	EPMVCL
;
	LD	A,(PLYPSL)
	CP	$5C
	JR	NZ,EDAI220
;
	XOR	A
	LD	(PLYSPD),A
;
	LD	A,$02
	LD	(PLCHPT),A
;
	LD	A,EDAI
	CALL	ENIDSHL	;ふくろうセット！
;
	LD	HL,ENWRK0
	ADD	HL,DE
	LD	(HL),$02
;
	LD	HL,ENXPSL
	ADD	HL,DE
	LD	(HL),$50
;
	LD	HL,ENYPSL
	ADD	HL,DE
	LD	(HL),$00
;
FUKUST
	LD	HL,ENYSPD
	ADD	HL,DE
	LD	(HL),$14
;
	LD	HL,ENTIM0
	ADD	HL,DE
	LD	(HL),$30
;
	CALL	STATINC
EDAI220
	RET
;=======================================
;EDAIPD
;	DB	4,4,3,2,1,0
;
EDAI300
;	CALL	LDTIM0
;	JR	Z,EDAI3010
;
;	DEC	A
;	JP	Z,EDCLER
;	RRA
;	RRA
;	RRA
;	AND	$07
;	LD	E,A
;	LD	D,B
;	LD	HL,EDAIPD
;	ADD	HL,DE
;	CALL	ENPTST
;EDAI3010
	CALL	EPMVCL2
	RET
;-----------------------------------------------
EDAI400
	CALL	EPMVCL2
;
	CALL	LDTIM0
	JR	NZ,EDAI410
;
	LD	(HL),$08
;
	LD	HL,ENCHPT
	ADD	HL,BC
	LD	A,(HL)
	INC	A
	LD	(HL),A
	CP	$05
	JR	NZ,EDAI410
;
	CALL	STATINC
EDAI410
	CALL	EPMVCL2
	RET
;-----------------------------------------------
EDAI500
	CALL	EPMVCL2
	RET
;
;
;
;
;
;------------------------------------------------
EDAICD
EDCA
	DB	$00,$00,$10,$10
	DB	$00,$08,$04,$10
	DB	$00,$10,$06,$10
	DB	$00,$18,$06,$30
	DB	$00,$20,$04,$30	;メッセージカーソルが消す！
	DB	$00,$28,$10,$30
;
	DB	$10,$00,$08,$10
	DB	$10,$08,$0A,$10
	DB	$10,$10,$0C,$10
	DB	$10,$18,$0C,$30
	DB	$10,$20,$0A,$30
	DB	$10,$28,$08,$30
;
EDC9
	DB	$20,$10,$20,$10
	DB	$20,$18,$30,$10
EDC8
	DB	$30,$10,$20,$10
	DB	$30,$18,$30,$10
;;;	DB	$00,$20,$04,$30	;メッセージカーソルがけすため!
EDC7
	DB	$40,$10,$20,$10
	DB	$40,$18,$30,$10
EDC6
	DB	$50,$10,$20,$10
	DB	$50,$18,$30,$10
;
EDC5
	DB	$60,$10,$20,$10
	DB	$60,$18,$30,$10
;
EDC4
	DB	$70,$10,$20,$10
	DB	$70,$18,$30,$10
;
EDC3
	DB	$80,$10,$20,$10
	DB	$80,$18,$30,$10
;
EDC2
	DB	$90,$10,$20,$10
	DB	$90,$18,$30,$10
;
EDC1
	DB	$A0,$10,$20,$10
	DB	$A0,$18,$30,$10
;
EDC0
	DB	$B0,$10,$20,$10
	DB	$B0,$18,$30,$10
EDCF
;------------------------------------------------
EDAICD2
	DB	$00,$00,$12,$10
	DB	$00,$08,$14,$10
	DB	$00,$10,$16,$10
	DB	$00,$18,$16,$30
	DB	$00,$20,$14,$30	;メッセージカーソルが消す！
	DB	$00,$28,$12,$30
;
	DB	$10,$00,$18,$10
	DB	$10,$08,$1A,$10
	DB	$10,$10,$1C,$10
	DB	$10,$18,$1C,$30
	DB	$10,$20,$1A,$30
	DB	$10,$28,$18,$30
;
	DB	$20,$10,$40,$10
	DB	$20,$18,$50,$10
;
	DB	$30,$10,$40,$10
	DB	$30,$18,$50,$10
;
	DB	$40,$10,$40,$10
	DB	$40,$18,$50,$10
;
	DB	$50,$10,$40,$10
	DB	$50,$18,$50,$10
;
	DB	$60,$10,$40,$10
	DB	$60,$18,$50,$10
;
	DB	$70,$10,$40,$10
	DB	$70,$18,$50,$10
;
	DB	$80,$10,$40,$10
	DB	$80,$18,$50,$10
;
	DB	$90,$10,$40,$10
	DB	$90,$18,$50,$10
;
	DB	$A0,$10,$40,$10
	DB	$A0,$18,$50,$10
;
	DB	$B0,$10,$40,$10
	DB	$B0,$18,$50,$10
;------------------------------------------------
EDAICD3
	DB	$00,$00,$22,$10
	DB	$00,$08,$24,$10
	DB	$00,$10,$26,$10
	DB	$00,$18,$26,$30
	DB	$00,$20,$24,$30	;メッセージカーソルが消す！
	DB	$00,$28,$22,$30
;
	DB	$10,$00,$28,$10
	DB	$10,$08,$2A,$10
	DB	$10,$10,$2C,$10
	DB	$10,$18,$2C,$30
	DB	$10,$20,$2A,$30
	DB	$10,$28,$28,$30
;
	DB	$20,$10,$60,$10
	DB	$20,$18,$70,$10
;
	DB	$30,$10,$60,$10
	DB	$30,$18,$70,$10
;
	DB	$40,$10,$60,$10
	DB	$40,$18,$70,$10
;
	DB	$50,$10,$60,$10
	DB	$50,$18,$70,$10
;
	DB	$60,$10,$60,$10
	DB	$60,$18,$70,$10
;
	DB	$70,$10,$60,$10
	DB	$70,$18,$70,$10
;
	DB	$80,$10,$60,$10
	DB	$80,$18,$70,$10
;
	DB	$90,$10,$60,$10
	DB	$90,$18,$70,$10
;
	DB	$A0,$10,$60,$10
	DB	$A0,$18,$70,$10
;
	DB	$B0,$10,$60,$10
	DB	$B0,$18,$70,$10
;------------------------------------------------
EDAICD4
	DB	$00,$00,$32,$10
	DB	$00,$08,$34,$10
	DB	$00,$10,$36,$10
	DB	$00,$18,$36,$30
	DB	$00,$20,$34,$30	;メッセージカーソルが消す！
	DB	$00,$28,$32,$30
;
	DB	$10,$00,$38,$10
	DB	$10,$08,$3A,$10
	DB	$10,$10,$3C,$10
	DB	$10,$18,$3C,$30
	DB	$10,$20,$3A,$30
	DB	$10,$28,$38,$30
;
	DB	$20,$10,$52,$10
	DB	$20,$18,$62,$10
;
	DB	$30,$10,$52,$10
	DB	$30,$18,$62,$10
;
	DB	$40,$10,$52,$10
	DB	$40,$18,$62,$10

	DB	$50,$10,$52,$10
	DB	$50,$18,$62,$10
;
	DB	$60,$10,$52,$10
	DB	$60,$18,$62,$10
;
	DB	$70,$10,$52,$10
	DB	$70,$18,$62,$10
;
	DB	$80,$10,$52,$10
	DB	$80,$18,$62,$10
;
	DB	$90,$10,$52,$10
	DB	$90,$18,$62,$10
;
	DB	$A0,$10,$52,$10
	DB	$A0,$18,$62,$10
;
	DB	$B0,$10,$52,$10
	DB	$B0,$18,$62,$10
;------------------------------------------------
EDAICD5
	DB	$00,$00,$42,$10
	DB	$00,$08,$44,$10
	DB	$00,$10,$46,$10
	DB	$00,$18,$46,$30
	DB	$00,$20,$44,$30	;メッセージカーソルが消す！
	DB	$00,$28,$42,$30
;
	DB	$10,$00,$48,$10
	DB	$10,$08,$4A,$10
	DB	$10,$10,$4C,$10
	DB	$10,$18,$4C,$30
	DB	$10,$20,$4A,$30
	DB	$10,$28,$08,$30
;
	DB	$20,$10,$56,$10
	DB	$20,$18,$66,$10
;
	DB	$30,$10,$56,$10
	DB	$30,$18,$66,$10
;
	DB	$40,$10,$56,$10
	DB	$40,$18,$66,$10
;
	DB	$50,$10,$56,$10
	DB	$50,$18,$66,$10
;
	DB	$60,$10,$56,$10
	DB	$60,$18,$66,$10
;
	DB	$70,$10,$56,$10
	DB	$70,$18,$66,$10
;
	DB	$80,$10,$56,$10
	DB	$80,$18,$66,$10
;
	DB	$90,$10,$56,$10
	DB	$90,$18,$66,$10
;
	DB	$A0,$10,$56,$10
	DB	$A0,$18,$66,$10
;
	DB	$B0,$10,$56,$10
	DB	$B0,$18,$66,$10
;================================================================
EDASTD
	DB	EDC1-EDCA
	DB	EDC2-EDCA
	DB	EDC3-EDCA
	DB	EDC4-EDCA
	DB	EDC5-EDCA
	DB	EDC6-EDCA
	DB	EDC7-EDCA
	DB	EDC8-EDCA
	DB	EDC9-EDCA
	DB	EDC9-EDCA
	DB	EDC9-EDCA
	DB	EDC9-EDCA
	DB	EDC9-EDCA
	DB	EDC9-EDCA
	DB	EDCF-EDCA
	DB	EDC0-EDCA
;- - - - - - - - - - - - - - - - -
EDAICS
	PUSH	BC
;
	LD	A,(ENDSYP)
	SWAP	A
	AND	$0F
	LD	E,A
	LD	D,B
	LD	HL,EDASTD
	ADD	HL,DE
	LD	B,(HL)
;
	LD	HL,EDAICD
;
	LD	A,(ENCHPT2)
	CP	$05
	JR	Z,EDAC090
	AND	A
	JR	Z,EDC000S
;
	LD	HL,EDAICD2
	DEC	A
	JR	Z,EDC000S
;
	LD	HL,EDAICD3
	DEC	A
	JR	Z,EDC000S
;
	LD	HL,EDAICD4
	DEC	A
	JR	Z,EDC000S
;
	LD	HL,EDAICD5
EDC000S
	LD	DE,OAM+$0C
;
	LD	C,$00
EDAC010
	LD	A,C
	AND	$03
	CP	$00
	JR	NZ,EDAC020
;
	LD	A,(ENDSYP)
	JR	EDAC030
EDAC020	
	CP	$01
	JR	NZ,EDAC040
;
	PUSH	HL
	LD	HL,TILTXD
	LD	A,(ENSVXL)
	SUB	(HL)
	POP	HL
EDAC030	
	ADD	A,(HL)
	JR	EDAC050
EDAC040
	LD	A,(HL)
EDAC050	
	LD	(DE),A
	INC	HL
	INC	DE
;
	INC	C
	LD	A,C
	CP	B    ;EDCE-EDCA
	JR	NZ,EDAC010
;
EDAC090	
	POP	BC
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
EHOSIMV
	CALL	EHOSICS
	RET
;------------------------------------------------
EHOSIXD
;;;   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $20,$40,$60,$78,$10,$48,$68,$90,$30,$50,$80,$90,$18,$38,$68,$78
EHOSIYD
;;;   0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
 DB $28,$08,$28,$00,$48,$40,$4C,$38,$68,$70,$58,$68,$78,$88,$98,$80
EHOSICD
	DB	$1E,$1E,$1E,$2E,$2E,$3E,$2E,$2E
;----------------------------------------
EHOSICS
	LD	DE,OAM+$90
;
	PUSH	BC
;
	LD	A,(FRCNT)
	AND	$01
	LD	C,A
EHCS10
	LD	HL,EHOSIYD
	ADD	HL,BC
	LD	A,(ENDSYP)
	ADD	A,(HL)
	CP	$98
	JR	C,EHSC010
;
	SUB	$88
EHSC010
	LD	(DE),A
	INC	DE
;
	LD	HL,EHOSIXD
	ADD	HL,BC
	LD	A,(HL)
	LD	(DE),A
	INC	DE
;
	PUSH	BC
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	RRA
	NOP
	XOR	C
	AND	$07	
	LD	C,A
	LD	B,$00
	LD	HL,EHOSICD
	ADD	HL,BC
	LD	A,(HL)
	LD	(DE),A
	INC	DE
;
	POP	BC
;
	LD	A,%10010000
	LD	(DE),A
	INC	DE
;
	INC	C
	INC	C
	LD	A,C
	CP	$10
	JR	C,EHCS10
;
	POP	BC
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
EFUKUCD
;0
	DB	$00,$F8,$58,$00
	DB	$00,$00,$68,$00
	DB	$00,$08,$68,$20
	DB	$00,$10,$58,$20
;1
	DB	$00,$F8,$5A,$00
	DB	$00,$00,$6A,$00
	DB	$00,$08,$6A,$20
	DB	$00,$10,$5A,$20
;2
	DB	$00,$F8,$5C,$00
	DB	$00,$00,$6C,$00
	DB	$00,$08,$6C,$20
	DB	$00,$10,$5C,$20
;3
	DB	$00,$F8,$5E,$00
	DB	$00,$00,$6E,$00
	DB	$00,$08,$6E,$20
	DB	$00,$10,$5E,$20
;- - - - - - - - - - - - - - - - - - -
EFUKUMV
	LD	A,$50
	LD	(ENOMID),A
;
;	LD	HL,ENWRK3
;	ADD	HL,BC
;	LD	A,(HL)
;	AND	$01
;	JR	NZ,EFUK000
;
	LD	HL,EFUKUCD
	LD	A,(ENCHPT2)
	RLA
	RLA
	RLA
	RLA
	AND	$F0
	LD	E,A
	LD	D,B
	ADD	HL,DE
	LD	C,$04
	CALL	ENOMST
;
	LD	A,$04
	CALL	NXOMSBL
;
	LD	A,(FRCNT)
	RRA
	RRA
	RRA
	AND	$03
	CALL	ENPTST
EFUK000
	LD	A,(ENSTAT2)
	RST	00
	DW	EFUK1000
	DW	EFUK2000
	DW	EFUK3000
	DW	EFUK4000
;-----------------------------------------------
EFUK1000
	CALL	LDTIM0
	JR	NZ,EFUK1010
;
	CALL	EDYCLC
;
	LD	A,(FRCNT)
	AND	$03
	JR	NZ,EFUK1010
;
	LD	HL,ENYSPD
	ADD	HL,BC
	DEC	(HL)
	JR	NZ,EFUK1010
;
	CALL	LDTIM0
	LD	(HL),$80
;
	CALL	STATINC
EFUK1010
	RET
;-----------------------------------------------
EFUKZD
	DB	0,0,0,1,1,2,3,3,4,4,4,3,3,2,1,1
;-----------------------------------------------
EFUK2000
	CALL	LDTIM0
	JR	NZ,EFUK2020
;
	LD	A,$CF
	CALL	EDMSCK
;
	LD	A,$19
	LD	(FKMSFG),A
;;	CALL	MSGCHK  ;EDMSCK
;
	CALL	STATINC
EFUK2020
;- - - - - - - - - - - - - -
EFKHOB
	LD	HL,ENCONT
	ADD	HL,BC
	LD	A,(HL)
	LD	A,(HL)
	INC	(HL)
	RRA
	RRA
	AND	$0F
	LD	E,A
	LD	D,B
	LD	HL,EFUKZD
	ADD	HL,DE
	LD	A,(HL)
	LD	HL,ENZPSL
	ADD	HL,BC
	LD	(HL),A
;
	RET	
;-----------------------------------------------
EFUK3000
	CALL	EFKHOB
;
	LD	A,(MSGEFG)
	AND	A
	JR	NZ,EFUK3030
;
	CALL	LDTIM0
	LD	(HL),$FF
;
	CALL	STATINC
EFUK3030
	RET
;-----------------------------------------------
EFUK4000
	CALL	EFKHOB
;
	CALL	LDTIM0
	JR	NZ,EFUK4030
;
EFNEXT
	CALL	EDINC
EDCLER
	LD	HL,ENMODE
	ADD	HL,BC
	LD	(HL),B
	RET
;
;------------------------------
;EFKTND
;	DB	$FF,$00,$00,$00,$00,$00,$00,$00
;	DB	$FF,$00,$00,$00,$FF,$00,$00,$00
;	DB	$FF,$00,$00,$FF,$00,$FF,$00,$00
;	DB	$FF,$00,$FF,$00,$FF,$00,$FF,$00
;	DB	$FF,$00,$FF,$FF,$00,$FF,$00,$FF
;	DB	$FF,$FF,$00,$FF,$FF,$00,$FF,$FF
;	DB	$FF,$FF,$FF,$00,$FF,$FF,$FF,$FF
;	DB	$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
;
EFUK4030
	CP	$E0
	JR	NC,EFUK4050
;
	CP	$DF
	JR	NZ,EFUK4010
;
	LD	A,$26
	LD	(SOUND1),A	;(S)
EFUK4010
	LD	HL,ENWRK2
	ADD	HL,BC
	LD	E,(HL)
	LD	A,(HL)
	CP	$FC
	JR	NC,EFNEXT
;;	JR	NC,EFUK4040
;
	ADD	A,$02
	LD	(HL),A
;
	LD	HL,ENWRK3
	ADD	HL,BC
	LD	A,(HL)
	ADD	A,E
	LD	(HL),A
	JR	NC,EFUK4050
;
EFUK4040
	LD	A,$FF
	CALL	ENPTST
EFUK4050
	RET
;-----------------------------------------------
EDMSCK
	LD	E,A
;
	LD	A,(PLYPSL)
	PUSH	AF
;
	LD	A,$10
	LD	(PLYPSL),A
;
	LD	A,E
	CALL	MSGCHK
;
	POP	AF
	LD	(PLYPSL),A
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;EPLCDT
;	DB	$00,$00,$02,$00
;EPLCDT2
;	DB	$02,$20,$00,$20
EPLCDT
	DB	$00,$00,$02,$00;0
	DB	$02,$20,$00,$20;1
	DB	$44,$00,$46,$00;2
	DB	$48,$00,$4A,$00;3
	DB	$4C,$00,$4C,$20;4
	DB	$D8,$20,$D6,$20;5
	DB	$D4,$00,$D4,$20;6
	DB	$D6,$00,$D8,$00;7
	DB	$DA,$00,$DC,$00;8
	DB	$DE,$00,$E0,$00;9
	DB	$E2,$00,$E2,$20;A
	DB	$E0,$20,$DE,$20;B
	DB	$DC,$20,$DA,$20;C
;- - - - - - - - - - - - - - - - - - - -
EPLCST
	LD	A,(PLCHPT)
	RLA
	RLA
	AND	%11111100
	LD	E,A
	LD	D,$00
	LD	HL,EPLCDT
	ADD	HL,DE
	PUSH	HL
	POP	DE
;
;	LD	DE,EPLCDT
;	LD	A,(PLCHPT)
;	AND	A
;	JR	Z,EPLC10
;;
;	LD	DE,EPLCDT2
;EPLC10
	LD	HL,OAM+$04
;
	LD	A,(PLYPSL)
	LD	(HLI),A
	LD	A,(TILTXD)
	LD	C,A
	LD	A,(PLXPSL)
	SUB	C
	LD	(HLI),A
	LD	A,(DE)
	INC	DE
	LD	(HLI),A
	LD	A,(DE)
	INC	DE
	LD	(HLI),A
;
	LD	A,(PLYPSL)
	LD	(HLI),A
	LD	A,(PLXPSL)
	SUB	C
	ADD	A,$08
	LD	(HLI),A
	LD	A,(DE)
	INC	DE
	LD	(HLI),A
	LD	A,(DE)
	LD	(HL),A
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;=====================================================
;=====================================================
YAOBYD
	DB	$37,$7F
;
YAOBJSTS
	LD	A,(FRCNT)
	AND	%00010000
	RET	NZ
;
	LD	E,$00
	LD	A,(MSGEFG)
	AND	%10000000
	JR	Z,YOS010
	INC	E
YOS010
	LD	D,$00
;
	LD	A,(GMMODE)
	CP	ENDG
	JR	Z,YOSED
;
	LD	HL,YAOBYD
	ADD	HL,DE
	LD	A,(HL)
	LD	(OAM+$18),A
	LD	A,$97
	LD	(OAM+$19),A
	LD	A,$A2
	LD	(OAM+$1A),A
	LD	A,$40
	LD	(OAM+$1B),A
	RET
;=====================================================
YOSED
	LD	HL,YAOBYD
	ADD	HL,DE
	LD	A,(HL)
	LD	HL,SCCV
	SUB	(HL)
	LD	(OAM+$00),A
	LD	A,$97
	LD	(OAM+$01),A
	LD	A,$FE
	LD	(OAM+$02),A
	LD	A,$40
	LD	(OAM+$03),A
	RET
;=====================================================
MSQYAD
	DB	$30,$78
MSQXAD
	DB	$30,$58
;
MSCURST
	LD	E,$00
	LD	A,(MSGEFG)
	AND	%10000000
	JR	Z,MSQ010
	INC	E
MSQ010
	LD	D,$00
;
	LD	A,(GMMODE)
	CP	ENDG
	JR	Z,MSCRS10
;
	LD	HL,MSQYAD
	ADD	HL,DE
	LD	A,(HL)
	LD	(OAM+$18),A
;
	LD	E,$00
	LD	A,(MSANSR)
	AND	%00000001
	JR	Z,MSQ020
	INC	E
MSQ020
	LD	HL,MSQXAD
	ADD	HL,DE
	LD	A,(HL)
	LD	(OAM+$19),A
	LD	A,$3E
	LD	(OAM+$1A),A
	LD	A,$00
	LD	(OAM+$1B),A
MSQ030
	RET
;-------------------------------------
MSCRS10
	LD	HL,MSQYAD
	ADD	HL,DE
	LD	A,(HL)
	LD	HL,SCCV
	SUB	(HL)
	LD	(OAM+$00),A
;
	LD	E,$00
	LD	A,(MSANSR)
	AND	%00000001
	JR	Z,MSQ220
	INC	E
MSQ220
	LD	HL,MSQXAD
	ADD	HL,DE
	LD	A,(HL)
	LD	(OAM+$01),A
	LD	A,$9E
	LD	(OAM+$02),A
	LD	A,$00
	LD	(OAM+$03),A
	RET
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
;%				 %
;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
EDMVCL	
;
	CALL	EDXCLC 		; X calc
;
EDYCLC
	PUSH	BC
	LD	A,C
	ADD	A,<ENNO
	LD	C,A
	
	CALL	EDXCLC		; Y calc
	POP	BC
	RET
;-----------------------------------------
EDXCLC
	LD	HL,ENXSPD
	ADD	HL,BC 
;
	LD	A,(HL)
	AND	A
	JR	Z,EDL090
;
	PUSH	AF
	SWAP	A
	AND	$F0
	LD	HL,ENXSDR
	ADD	HL,BC 
	ADD	A,(HL)
	LD	(HL),A
	RL	D
;
	LD	HL,ENXPSL
EDL00
	ADD	HL,BC 
;
	POP	AF
;
	LD	E,$0
	BIT	7,A
	JR	Z,EDC00
	LD	E,$F0
EDC00
	SWAP	A
	AND	$0F
	OR	E
	RR	D
	ADC	A,(HL)
	LD	(HL),A
EDL090
	RET
;====================================================
EDZCLC
	LD	HL,ENZSPD
	ADD	HL,BC 
;
	LD	A,(HL)
	AND	A
	JR	Z,EDL090
;
	PUSH	AF
	SWAP	A
	AND	$F0
	LD	HL,ENZSDR
	ADD	HL,BC 
	ADD	A,(HL)
	LD	(HL),A
	RL	D
;
	LD	HL,ENZPSL
	JR	EDL00
;------------------------------------------------
	END
